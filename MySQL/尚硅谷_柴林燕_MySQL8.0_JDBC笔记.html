<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一章  JDBC概述 | Java学习资料</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="JavaSE,MySQL,Spring,MyBatis">
    
    <link rel="preload" href="/Java-Resource/assets/css/0.styles.d6af471c.css" as="style"><link rel="preload" href="/Java-Resource/assets/js/app.3e355afd.js" as="script"><link rel="preload" href="/Java-Resource/assets/js/7.732492af.js" as="script"><link rel="preload" href="/Java-Resource/assets/js/1.35f7ce2e.js" as="script"><link rel="preload" href="/Java-Resource/assets/js/18.fc5da0bb.js" as="script"><link rel="prefetch" href="/Java-Resource/assets/js/10.c088622a.js"><link rel="prefetch" href="/Java-Resource/assets/js/11.38c9bb61.js"><link rel="prefetch" href="/Java-Resource/assets/js/12.efda74de.js"><link rel="prefetch" href="/Java-Resource/assets/js/13.8eda7c5f.js"><link rel="prefetch" href="/Java-Resource/assets/js/14.35682402.js"><link rel="prefetch" href="/Java-Resource/assets/js/15.20bc2c9b.js"><link rel="prefetch" href="/Java-Resource/assets/js/16.2abb7387.js"><link rel="prefetch" href="/Java-Resource/assets/js/17.23ba30ae.js"><link rel="prefetch" href="/Java-Resource/assets/js/19.75a51867.js"><link rel="prefetch" href="/Java-Resource/assets/js/20.900f70ff.js"><link rel="prefetch" href="/Java-Resource/assets/js/21.55fafedd.js"><link rel="prefetch" href="/Java-Resource/assets/js/22.7375487f.js"><link rel="prefetch" href="/Java-Resource/assets/js/23.cd1de481.js"><link rel="prefetch" href="/Java-Resource/assets/js/24.45ef11cf.js"><link rel="prefetch" href="/Java-Resource/assets/js/25.13052779.js"><link rel="prefetch" href="/Java-Resource/assets/js/26.64d4f060.js"><link rel="prefetch" href="/Java-Resource/assets/js/27.dd2bc265.js"><link rel="prefetch" href="/Java-Resource/assets/js/28.22702d87.js"><link rel="prefetch" href="/Java-Resource/assets/js/29.a6fa4ca7.js"><link rel="prefetch" href="/Java-Resource/assets/js/3.6d32b58d.js"><link rel="prefetch" href="/Java-Resource/assets/js/30.5f50badb.js"><link rel="prefetch" href="/Java-Resource/assets/js/31.d0a81190.js"><link rel="prefetch" href="/Java-Resource/assets/js/32.41e095b0.js"><link rel="prefetch" href="/Java-Resource/assets/js/33.717186b7.js"><link rel="prefetch" href="/Java-Resource/assets/js/34.2d02ee4b.js"><link rel="prefetch" href="/Java-Resource/assets/js/35.7bf70bfa.js"><link rel="prefetch" href="/Java-Resource/assets/js/36.a8e919e7.js"><link rel="prefetch" href="/Java-Resource/assets/js/37.019374ff.js"><link rel="prefetch" href="/Java-Resource/assets/js/38.4314055a.js"><link rel="prefetch" href="/Java-Resource/assets/js/39.4993a3b7.js"><link rel="prefetch" href="/Java-Resource/assets/js/4.d71962df.js"><link rel="prefetch" href="/Java-Resource/assets/js/40.631f09e1.js"><link rel="prefetch" href="/Java-Resource/assets/js/41.8bb881f4.js"><link rel="prefetch" href="/Java-Resource/assets/js/42.d65debda.js"><link rel="prefetch" href="/Java-Resource/assets/js/5.d38c8a38.js"><link rel="prefetch" href="/Java-Resource/assets/js/6.9f77652f.js"><link rel="prefetch" href="/Java-Resource/assets/js/8.93b3c9de.js"><link rel="prefetch" href="/Java-Resource/assets/js/9.bbcc58a7.js">
    <link rel="stylesheet" href="/Java-Resource/assets/css/0.styles.d6af471c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Java学习资料</h3> <p class="description" data-v-59e6cb88>JavaSE,MySQL,Spring,MyBatis</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Java-Resource/" class="home-link router-link-active"><!----> <span class="site-name">Java学习资料</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Java-Resource/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      simonf 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://simonf.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/Java-Resource/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      simonf 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://simonf.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/Java-Resource/JavaSE/安装笔记" class="sidebar-heading clickable"><span>JavaSE</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Java-Resource/MySQL/尚硅谷_柴林燕_MySQL8_可视化工具Navicat的使用" class="sidebar-heading clickable open"><span>MySQL</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java-Resource/MySQL/尚硅谷_柴林燕_MySQL8_可视化工具Navicat的使用.html" class="sidebar-link">可视化工具Navicat的使用</a></li><li><a href="/Java-Resource/MySQL/尚硅谷_柴林燕_MySQL8.0_安装和使用文档.html" class="sidebar-link">MySQL8.0_安装和使用文档</a></li><li><a href="/Java-Resource/MySQL/尚硅谷_柴林燕_MySQL8.0_SQL笔记.html" class="sidebar-link">SQL笔记</a></li><li><a href="/Java-Resource/MySQL/尚硅谷_柴林燕_MySQL8.0_JDBC笔记.html" class="active sidebar-link">JDBC笔记</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Java-Resource/JavaEE/day01_jdbc" class="sidebar-heading clickable"><span>JavaEE</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">第一章  JDBC概述</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="第一章-jdbc概述"><a href="#第一章-jdbc概述" class="header-anchor">#</a> 第一章  JDBC概述</h1> <p>之前我们学习了JavaSE，编写了Java程序，数据保存在变量、数组、集合等中，无法持久化，后来学习了IO流可以将数据写入文件，但不方便管理数据以及维护数据的关系；</p> <p>后来我们学习了数据库管理软件MySQL，可以方便的管理数据。</p> <p>那么如何将它俩结合起来呢？即Java程序&lt;==&gt;MySQL，实现数据的存储和处理。</p> <p>答案：使用JDBC技术，后期可以使用MyBatis等持久层框架（底层仍然使用了JDBC）。</p> <h2 id="_1-1-jdbc概述"><a href="#_1-1-jdbc概述" class="header-anchor">#</a> 1.1 JDBC概述</h2> <p>JDBC：Java Database Connectivity，它是代表一组独立于任何数据库管理系统（DBMS）的API，声明在java.sql与javax.sql包中，是SUN(现在Oracle)提供的一组接口规范。由各个数据库厂商来提供实现类，这些实现类的集合构成了数据库驱动jar。</p> <p><img src="/Java-Resource/assets/img/image-20210905174807576.8bf9b902.png" alt="image-20210905174807576"></p> <p>即JDBC技术包含两个部分：</p> <p>（1）java.sql包和javax.sql包中的API</p> <p>因为为了项目代码的可移植性，可维护性，SUN公司从最初就制定了Java程序连接各种数据库的统一接口规范。这样的话，不管是连接哪一种DBMS软件，Java代码可以保持一致性。</p> <p>（2）各个数据库厂商提供的jar</p> <p>因为各个数据库厂商的DBMS软件各有不同，那么内部如何通过sql实现增、删、改、查等管理数据，只有这个数据库厂商自己更清楚，因此把接口规范的实现交给各个数据库厂商自己实现。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span>

<span class="token comment">/*
一、JDBC的概述
1、之前学习了Java，又学习了MySQL数据库
JDBC 把  Java程序 和 MySQL数据库连起来，Java程序是负责数据的输入，业务的处理，数据的显示，MySQL负责数据的存储和管理。

2、JDBC：Java Database Connectivity
JDBC = JDK核心类库中的一套API（接口+部分工具类） + 数据库厂商提供的驱动jar


Java程序不仅仅能够连接MySQL数据库，可以连接很多数据库（Oracle，SQL Server，DB2，...）。
这就有一个问题？
    数据库不同，它们的操作方式会有所不同，因为它们的底层实现方式，实现的语言等都是不同的。
    那么Java去连接不同的数据库时，就会有不同的API。这样的话，就会导致：
    （1）程序员的学习成本增加
    （2）如果发生数据库迁移，Java代码就需要“重写”
    如果是这样的话，就非常麻烦，可移植性、可维护性等非常差。

SUN公司（现在Oracle）就说，必须统一一套API，可以操作各种数据库。但是SUN公司又不同知道所有数据库内部是如何实现的，
也无法要求所有的数据库厂商按照统一的标准来开发他们的数据库软件。
SUN公司（现在Oracle）就设计了一套接口 + 部分类。然后各个数据库厂商，来提供这些接口的实现类。

==&gt;Java程序中面向接口编程，在程序运行时，又需要引入这些接口的实现类，这些实现类就是数据库驱动jar。



 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJDBC</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_1-2-java程序连接mysql数据库"><a href="#_1-2-java程序连接mysql数据库" class="header-anchor">#</a> 1.2 Java程序连接MySQL数据库</h2> <h3 id="_1-2-1-引入mysql驱动jar"><a href="#_1-2-1-引入mysql驱动jar" class="header-anchor">#</a> 1.2.1 引入mysql驱动jar</h3> <div class="language- extra-class"><pre class="language-text"><code>（1）在模块路径下建一个文件夹“jdbclibs”，把mysql的驱动jar放到里面
MySQL5.7：mysql-connector-java-5.1.36-bin.jar
MySQL8.0：mysql-connector-java-8.0.25.jar
（2）在jdbclibs文件夹上右键--&gt;Add as Library...
（3）填写库名称、选择这个库应用范围（模块）--&gt;选择使用的具体模块
</code></pre></div><p><img src="data:image/png;base64,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" alt="image-20211202092540371"></p> <p><img src="/Java-Resource/assets/img/image-20211202092647348.42179094.png" alt="image-20211202092647348"></p> <p><img src="data:image/png;base64,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" alt="image-20211202092753686"></p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVkAAAC+CAYAAACfxHxVAAAgAElEQVR4nO2dbWwb953nP5MmzYOud5adppcm7pm2qLBo2G1Dr/eotkgdbYySp0MVXOQufMCqL9qZW3RflKzRfaUGV73qwiW7d1i0nPZFVSyCs2UgwkHH6dlxvLkm4sIbuYsqm7Ia2Uqbp2saW9m9U5yHXuZezHA4w2dSHIkUfx+AgDjzfxyJX/3+v/9wvoplWRaCIAhCINy00wMQBEHYzQQisk+ce9r3+p//6+948eXXttyuoSkoyhhZswuD3FEMNEVBUTSMeiW8czWzjCkKyliWnZr67rn2LbCxzNncWZY3+qxtoSe5eTs6eevtd/j5C6u889573Bf62HZ02RxDQ0nqQJzM6hKpMNjil0T3lotnWF1KEQZb7EbTFGqcMzSFpLeimsfKJbZhIv3CBstnz7B8XXGPWNYhjmnjhKrKrnMht8ye448SG97OMXaTfplDk3GuXyC3vIfjj8YIZhrrXMid44pi/10celhlPARN/17WL6Cfv+Ic38th3/jLbVada1ivXHfj8HEerbog9c416A9HZE+fPs3Q0BBHjx5laGjIPbm5ucnFixfZ3NzkS1/6UvvXr4IXzHVeMNfrnn/k2INb7qM5JtmxUdKFeudLolsql2Y6O8FSag1tNE0BlbyVA00hqZfOhSGSYdVKES4JtZ5Em7SorbMJcpZFLrhJ9izlDxH2H7yu+48BEOKBw8tcuLpBrGWFsj+Ub8a0irY6YDjGo1psi43UmUNX2u4mnVzrbmGLE8c0VFdYL7AeKv/jrf7bcOot72FKVW3hX79A7swF9mrjhNhg+awthGpsuOJcs3pneO7aCCMjlf01O1evP7veTQBDQ0M+QQW/wHqFd1spLZMVBUWrXFibZMecc4p3KVs67l3alo9lVgFU8tYqmXhlhwlyVimqDZOaUQEoFNfAWEAH4pmTJIDEyQxxoDC/iAkkUk60S4KT1Q1XUCNd0HCu3qqaO+cx39q91GZlGy0er0xdNB2Pv/5YJ3mE0DjqVIyNcxeo/Nc7fDAE61fp51V1v8xhx8a5cZ2NfYd5wBXRYWKP1lrZVBJi3BtZhw4ywgbXN4CNq6xfGyn/wwg9wOF9a1xdb1KPYWKPamjaOAer+mtwrmF/dr2bAY4ePeoK6sWLFzly5AiXLl1yBfbo0aMtXLFuYziRo4OeJOk7v0bRF40WSI9qRKwcE1Nx0oUC84smqVQYzEXmC4A6Q3o0DEs5wKTYbAQL9vo/HhnBLK4AEI3YUko4QhQoFIqsgSOwYGbHGE0XIJ7hZMvZgmZzLU0xzWjS+3aa7MQSqXCNNEep3ZaP6yQVyFs5Ek3HU12/kB5Fi9SL3BswfJDQvjNcXR8ntGeZs2fWCR1/lNjwQUKc4fJ6zB/JbCxz9sxzXPctLz1LzvM6a3tjzvK2Yhl3eJjn1p2l78YyZ8+8Say0/PS+rzzXaTu15lCzfOV87AhoPVRelm4sn+XMesjTZ2Wd0gXyL7/3xqY8S9s65+pd61p0c7zDexm+dq61fhuxfpU1hjk2DKy/ybWRgx6hHmbvMKxf34DQcP16nfJm8/7cSLaUKqiMYCtTCNuGEzkSz7BqWVhWHtVXwF5yW84rrwKsUDQhPDHlizLNxXkKgDrZugK4OdZ4hrlUuGn5UuQ36uQh1JkULdRyOms21xIqed987X8kbn01714PK5doftztr9SezmzWbD6eynZX7ah+pdjNXbFhYrER1q56Y9wNli/DuKahqirqw4dYO3eBdUKMa8eJ7bU49LCK5hFYjtllNW0c1tc6GMdW2qk1By/15mPXu+ZGlxtcXb/GSCzGcN06pbEus+e4c06dIrR+hgvrzc41G2dQ4w0xfmyEK+d1crnq1QzAlfM6um6/chdqlNhY5uy5NUaO2f+0Nq63GI9X1OuUVvpzN75KgtoTAgtu5BifmnDEaoRIHMrhVYPcajjFjJomqRdZw6Roh7G0prGeKM2zsVVXPuIRRpw+l6yU3YKmkEwqrGRW7Xztluda0Rcw4ilQql/5T6TZ8XJ/tdurN57SefQkijecLXpj+nbYx549VOcrQwcZOXeV9fGQ80EYJjYeY2P5LPrydafQodpNrl9lbd9hjnuXorERnltuc2hbbadqDl4azCd0kJFzy1zdiBHDWZKGmtRZv8oV5TrM65SHp7D3+gbQ4FxouMk4Axov2CkjdZyN5bPM6zrWoYfRPGFt7ZyszcbyWc48B4ePa+5G0/DeYXiz7gTq1uuUVvrz3V1QEtZLly5x5MiRwAS2nQ2ugvvB9acHzOw06UL5zoDK3f3EpAq6zkI2woodxtJcY02yY0kn9+oXyHAkChTsaC0RBrPICkA0UiUrpb4LbYpOvbl6CjipCZPFebtANBKmlPfQFwxyiepZVh4vzcU7vrVidXvNxlN5jTpi/TLPEeJ4zT/2EAdHzrG8/ACh2LC7VOXwcVR12F169zYVc/DScD5OvasbHGQdDvvTC/WugeWmSipYb3CuwTg3rm/A8EG7TgDjLTEcexQ1Zq8aLhxsvnm5fiHHOY6haTUKblxng5AzTzvnOnxwuHm9TmnQH9S4T3a7Itijxq9rvkqUlvzoSWdzpVZusUB61N54SVaeTEyiAivz8xSIk2klQWqcciPjQnrUv1nktFdIT5M1wTiV9qQgDDT3HlYDLVnO5bZCa3MFO2+qoCilCN6OzsOpGXs579a3x1zveGku3uP2kJ32moyn1K7vGjW457cu6xfIndvg8His/CGuuIc09MDh8qbMm29ybd9hxkt5v6vrXKvXduggI9ee47K7wtxgeblymV/a9GjQVhfa8c3BS5P52PUuc3kdQqUPbaM6VWOF9QvOMrzRubrjtJf9+/bsCWa8G8ucrUoBOKuaRmwss7w2wrFaShx6gMN45rl+medwNtca1euURv05bMt9sh0RTrGULzr3skI8k2dqPumKYDg1g5ouL+sz0TRpnzIlsANKexNqYosBFyTI5VX0pE561Ll3T82XN3oKaUaVdLm4mm89ymsyVxffPONkVnNOdJ4gt5phxbtZ1ey4lQefeKrOplcr46nXbnOunNe54vxs7Y1xXBtvfP/l8EFCXLCXoaEHOLx8hnndXvDuPXSIfeWCHAztY96z8TV+/DBnz+TQ3Q2rEVxVGY4xfnideWf57G/LS2jr7Xjn4Gu60XxwN6SeGz6GNtxKHf9YwVluNz1XPc69l3Ocv6JgHTqG5t057+Z4h2OM7zmLrp93mzh0TPUt4X1/L6V7UN98k+vKFc7rV/BipxaGiY17f1+HOKY5/8Qb1qNDGvTnoATx7IInzj3d8Pwjxx70Ra1eLib+TdfGUdrp78qytquU8r4eYRPqsrF8ljNvxny5uo7o1o31HbTjzuGB6xV3LvQWXbvWgksgkez2fKmgGaW8ZZyprYex3aWUz/VsZAn1GY7FGMk125SpZIPls5fZ+6jnNqxza+w7fLxNge1OO6U5/GLPBtf2hWi2It4pOrvWQiMCiWRbIchI1rcJtqNfb613n6pN70XYu4yK+zP994xuczvO1znrf5VY2K3sbpH1PnegR+jlsQmC0H12TGQFQRAGAXmerCAIQoAoH515RiJZQRCEgJBIVhAEIUBEZAVBEAJERFYQBCFARGQFQRACpC9EVj34pu/1Hz/2z3z8Q++21Yb1kf387NufYuYjtff5rPvv45U/388nLQvLup2ZP/8MP76/vT1By9rHj799H1OW5euv0/YEQeh/+kJkKxm6+X0+9+G3+PTwOzs9FEEQhIYE8uyCG/94AeWDt3PrgQdQbrnNPW699zbvvHgZ690b3P6J8QYttMYfDt/gD4dv1D2vXy1/Q1z57Ut87lsvAUrd8t1ku/sTBKE3CSSSVW7+INa7N2xBfe9twC+wys0fDKJbQRCEniOQSPbWAw+4gvrOi5f54N0R3n2t6ArsrQceCKLbhlgf2c8zX7uD/zJTZF5RsKx9zM1GeNhb6PXfVNS6kx9/u1zm/Jln+PLzdmRaWf/q05f57JO1+zvTQnufHP8UxoOlB6W/wdedcQqC0N8EIrLKrUPcGoqVhfbXP7eP33KrnUL44B1BdNsyJYHkzDPc44jc1J98hu/d6S/38PE7+frMM3xZUbDuv49Xj0eYWilyhjuZm41w6OnL3HPBm65oPK+67f3rj/HXD97g6zM/LwurCKwg7AoC2/hSPngHtx6IuTlZ5Zbb7Pc7LLAARO/k4dd/Q2alfOjM829UFTt/xhNNrvyGH7x+J/8uWq7/tSffaqvbuu3977e4wp18b/bTde9+EAShPwn07oLS5tdNQ3ucCPb2ILvrWxTlGl/+1rN8dOZXMPVZXmlwq5kgCP1F4Ldw2UIb6y2BXXmD83d9jHTUfmtZt/Otz99ZVezh+8vH/uCP7+M/3fUG/2OlVv19zIw3n1+99qyP7GfmfgtFucG3/+tlfvD6EIc+vKUZCoLQI/SukWKAKMo1ps+8wavHP8srxwE2+cHTb8DH/eXOcyevfDvivCtvRilcY/qvf8MzXyvVt881y8nWbe+3L1E8WmoLeKHo5ooFQehv+uJRh+rBap/2VvDeJ1t5d4EgCMJ20BeRrFcsO+UP7t/Hwdev8asujEcQBKFV+kJkt4J9q9Sd2Mvz3/ALiWIFQdhGdr3IKs//inued+JXEVhBELaZvnxAjCAIQr8gIisIghAgYgkuCIIQIBLJCoIgBIiIrCAIQoCIyAqCIATIrr+FqxFPnHva/fmRYw9y7Z3/h/bsa8Tvup2Drz7vOycIgtAJEsk6fPf5a2jPvkbuM3fzjfv37fRw+gtDQxnLYgJgkh1T0IwutGtmGVPGyJoABpqi0Y1muzcmQWhO34js6dOnWVxcZHNzM5D2v3H/PnKfuRvt2df47vPXAulD2EkMNEVhrJk6GhqKojivHhB1oe/pG5EdGhpic3OTixcvBiK0Esn2AhVRcDjFkrVEKrz1NhVlAdQmRQ0NZTbCqmVhWRaWlSNRWaYrYxIGib4R2aNHjwYqtBLJ7lbCpJZswZxsWM4kO7tCZi6F6KfQTfpGZIeGhgIV2s4iWXsJWlpelpei/uP+ZaeBpoyRNbKMOec1A98y1d9Oq2Vb7Ddbu66ZHWtjmVzRT1JvWsaNTs0sY972nfd5DDRllHQB9KSCMpZltbKsh/bG2wLmIvNMwalav09fxzXGX2OeblTuXAc3Zy0MGn0jsmAL7ZEjRwDY3Nzk0qVLXWu7/UjWQFOSrGRWnaWlxVIqXPO4lYekTwgKpGdhzrKw8qotKguTdtnVDKRPdVC2xX6L3rrT9gaOmWU6HSXfaJlcMW/ylttPvsYyXE8uMOmOQ0VPNhZChQQ5a5VMHNS8hbWUYrRe4bbG2yJrRQqFNMVJq/r61MUke8r53dSZp3sdliRCHlT6SmS9wuoV3G7QdiRrLKDHM8xVJudqHU+cJBPXWXA/ffHysjQxiUqczElHJsIRoqxQNNss22q/bt0JpuJ42tFJVu2ae6NR55zTz0mPqiUmq1VWzXuEr2ocW6Sd8baDd17hFDNqgfnFRo2ESeVSUIqqa0T0vusgDCR9I7LeFIE3ddAtgs/JxomMBNBsV/pNkLMsLGsOpr0CVTpuYfXUZk8A4x2JEG9eyo+TKphmzo1+225D2PX0jcgGKbDQQSSbmEQtpDnlRmcG2azpHp/2hlHGKdJMMRGkSG2lXzNL1gB7k2iVTLxAca1xP6e8ucfZ6ghO94StZnaadEFl0g3pypG6uThPodnctjLeJu2497yGJ5jCc/3MLLN6nKmJcP17Y9eKFDyrh47mIux6+kZkgxRY6CSSTZBbzbCSLC1PF4ikwvZxK080PerZGIJ84Dm5LfQbThFZKM1jlHQ0T67uGjdBrpQbVhQUZRqmaqQLWHDHMZqOki/lTcMp5jKQHrXPTRejnugvzMRUvLzx1ZXxtkqY1JLn+o2mieabRMOJk2RIM6rUmosg2Az0ow69X6u9+tH7Kbx+g9xn7mbfrR+o+sqtIAB2VDtaZKYbm23CQDDQzy7w8o379/mfXbDTAxJ6EnNxnkJ8ih1Jrwt9iYisw3efv+aPZF/d6REJPYWhOXcPqOQtuR1LaJ2BThcIgiAETd9sfAmCIPQjIrKCIAgBIiIrCIIQICKygiAIASIiKwiCECAisoIgCAEy0PfJipGiIAhBI5GsQ1fsZ3yGgm3SzKBvK23vFGI6KAj9I7JipNgqLRoGbrncFp/dKggDQt+I7K43UtyyQV+rhoHdKGeSHfO4MOSjpEdrOB+I6aAg9I/IipFiM1o1DOxCOXOR+YLKTEk9u+18IAi7iL4R2X4wUvTbj1Qb6VUZA3rfV5kGtmJWuEOsFSmok55H/YWJRGGlWJEzENNBQegfkYXeNFJs2VCwkTFgh23vFGZxpZNaYjooDCR9JbK9aKTYlqFgqzRte2c3ncKRaCe1xHRQGEj6RmT730ixm/SAweFK0bOkNymuQDTSYCBiOigMKH0jsr1vpFjbULCaFkwEO267Dq3er9pqOcfbyh2fcYo0TuQtpoOC4KNvRLYnjRRbMBT00dBEcIttbythUnMeE8lWDBvFdFAYUAbaGUGMFANGTAcFYbCfXeBFjBS7j5gOCoKIrIsYKXYRMR0UBJeBThcIgiAETd9sfAmCIPQjPZku+Od//x/4/T/8YqeHIQhCF7gl/kd86Mzf7PQwdoyeTBdc3y9ZPEHYTex9aXCfRtGTkWyJQf7FCMJuQAImyckKgiAEioisIAhCgPR0uiBoxEhREISgkUjWYcftZ9rCQFNq2L0IYt4Icg16DBFZh/561KHQU9R1fKiknecA1zGw9PUlQtoP9IXI1nOq3dzcZHFxkdOnT2+5j/6KZHcDJcuZLje77eaNBtpommi+vuODTYvmkw0NLCv7ipKermHVIwaWPUVfiGwtX6/Kh3hvFYlkhc5RmSw9Ziwxiep5ZrBLy+aTDQwsKx0zEifJMM+iRLM9TV+IbKWB4uuvv171EO+t0n4ka6ApY2SN8vJNM7AfjuK8t5d6dmTiW/YZmmsWaJbsWBQFpZGRYtsGg/765f4r263sc4xstnIOzc416q/6XDzzIzRllHQB+5m57rwaja1Fs8WWzBurfydmdqzcZsvLf4AEJzMrzJbaMhbQ1ZnqKLJV88m2KVBcqzgkBpY9RV+IbD2n2m4+xLuzSLZAetYxByw9ZHth0rVXIX0KgzCpGZXC/KL7B2ws6KgzKcJmlul0lLxrJVN67upWjRTt+u7S1LJYSoVrHrfykPSJWYF00TuHaU/er945A02ZJbJaGu8qU/Ojzoe5us9C+ivkrFUycVDzJePEVsbWrtliPfPGyt+JyeJ8wf6dtGD4WItCetT1LotHqh/u2Jn5ZAUjEeKFCkeKpvYSYmC50/SFyAJVgtptl4TOcrJxMnPOH2ZiEpU4mdJaLhwhWlo2JiZRC6VlncGC7iwvwxGi6CQrNzBaNGl0Cldvpjj15yrDqVrHq5at3jlMMOWzL6hzzlhAp+A6PihOlLpSNOuPpWoarYyt0myx2UZSA/NG7+/EWcrbS/5Gho81+jOzTKch4/6DyRNNj1ZFv52ZT1ZOJ8WS1zFjNkJGjVND01u7Bg5iYBksfSOyUBbWu+66q8+MFBOczMD8oomZnUV3l40lQ8Q5mO50t7gbporNPqitNJFh1SpH3uXoeas0GluTuTc0b0wwqRbs38niPGRO2r+TJnUq+zMX5yn40gMJJtU6aYB2zSdrTjlXvsZLEYp6lIZNiIHljtNXIgvdj2BLBH13QXhiCuZPcWqecjRoZskaYG92rJKJO/m1rRopVtU3yGZN9/i0Lz98ijRTTGxFD6v6A0NzlqT1xlKnja6OrYl5Y+Jkxv2dTJU6adPwMTwxRVyf9fxzNFjQHfH03q/aiflkEwwtyYrvn4MYWPYifSeyQRH43QXhFDNRHd0rGuEUkQXPEjuaJ5eArRspJsiteowOlQUiqbB93FnOuptLrZggtt2fwsJkrhyt1xxLmImpuGfjK4CxNTNvDE8whY4e9USi7Ro+hlMs5aOeVImdS89Vrb87MJ+sonR7l/2ajaw2Xy2IgeWO09OPOgz6KVzbbaRoaC1+MGpXRpmNsCqbE40R88aeugbb9VnuZQb62QVeAjdSNLPM6iozlkhkkIh5o1yDXkNE1iFII0VDU0jq9u1KOx1Z7FrEvFGuQY8y0OkCQRCCRT7LsvElCIIQKCKygiAIAXIzvLLTY2hAL49NEITWGdzPskSygiAIASIiKwiCECAisoIgCAEiIisIghAg8mWELvDEuV/63t9x283cd/DDHLh3zw6NqNd5Ck35KZPWd0ig7PRgBCFQBjaSPX36v7O4+CSbm291ve233v49P3/hNX61/kbX2xYEob8Y2Eh2aOgONjff4uLFJY4eHWNo6I6u9/GC+TteMH9X9/wjxz7e9T4FQegtBjaSLQlrSWiDiGgFQRAGVmSHhu4IRGg/cJPCgXv2cOCePXzgpnbzjU+hKfeiOK+x7HrN44ryTQwsz7kvkjV+yJhzXjMsML5Zo53Kvlqpt052rKIN45soYz/ExMLMfrHBuLxjvtetIwiDxMCKLNhCe+TIpwDY3HyLS5f+YcttHv7kPXz6E3fz6U/czeHoR9uo+RSa8qesZH6GZb2MZb3MUipU87htMPgXHkFbdgwdX8LKn0BP7kdZ+IJddvUxSH/fU9ZLK/UOkJo5QWH+SVcgjYXHUWe+Qtj8EdPp+8hbLzlj+0tnI8seM/mX3DG3ZwQpCLuHgRZZr7B6BXcr3LWvbItz153/ovWKxk/R448xlzrQ/Hjiz8jEH/cYDMbIzH2FMAokvoBKjMxJxyY9fIgov6K283SL9RJfQC0sOkaQT7Ggn3CMIA8R5XGSyiRZ0yPizpj9RpAnWr8WgrCLGFiR9aYIvKmDrfL6G/+35s9uvzfe5drGW2zeeHeLPcW2bn7YMg85RpAvYmb/Cl39ghOxPkTOehnL+h5M70dRvugXW0EQBldkgxBYgL9feZXL/2i//n6l+snfb994j3/1odt4+8Z7/hOJL6AW/rPHcPApstl19/h09sVyWeP7pJlo32DQ/CFjHQpheGIC5r/vGEEeddvLGhYQIrX0MzLxZccIsnIu62RnH2+7T0HYDQzsLVxBCCzA++9b/PqVf6p73gJuvvmmGhnSh8itPsbY6H7n9vwT5K3vACFy1k/QlM+hpEtlT5C3nGX+dhH+KjPRe0muPMZquHwscupelKTzXv0JVsKJcPMnUJL7sT12Y2QyJ2B++4YrCL2CYlkv99z67vr+zwOw96W/3eGRtEblN77q8cb1zapjX/2Tw90eTmAY2r3MRn7mbMi1W/mbKLNhVpe2+Z+DsKP022c5CAY2ku0mrX6p4If/7bmARxIg5g+Z1U8wYx1oXlYQBBcRWaEphnavYwT5kjxrQBDaRERWaEoi9zJWbquN/CWWWPUKA4iI7DbST/lXQRC6w8DewiUIgrAdiMgKgiAEiIisIAhCgIjICoIgBIiIrCAIQoCIyAqCIASI3MLVBcRIURCEegxsJNt7Roq2A0H9xwU6TgOuu0CpfLVjgqFVHnde2lPV/fmO1cfQvO4IDcbqcU2oOUZxRxAGjIGNZHvVSDEet5/bmqp4CIuZ/SvniVZ+1PxL5BIVX3V1v6HVwHrbfJJ5YsT1n2Lkjnb0dVlVvY/09I+YaPLQl5pjFIQBYWAj2V41UoxOTdSwi1lncR77cYFdwlxchKnvMaN6HRbaZPLPyFDxrFtBEHwMrMj2ppEiEPkKM+rjzNZ6SHdky8NzsEV7auIAickT6LM/6nAJf4DU3GOQ/pxtwigIQhUDK7LQa0aKZRKTJyi40aztKqDOfIVaRgh6cn+dnGsDvM4KPv+uDgh/lblMDD35F3XMGv1jrO2cKwi7l4EW2Z4yUvTiGCXOZl90BNFvSuhF9TjCWrmHWmreWHic+NQfO3nUh5hUl5lfLEXOXivv1qxqwqnvkYk/TlK72HSMHT3wWxD6mIHd+ArSSPGjH/mX7s9V/d54l7ff/j233dbo0odIzZwgPfsk2ejjxKd+1kU3gadY0KGA184G4PsYqe+QcMwR23uyYYjU3GPMj/4pGuJKKwheBjaS7TkjxUocM8K0foKZSpvwrWD8FJ0T5C1PBGz9BJUtbIBBOW2gi2GiIHgZWJEN2kjx16/8E++/X73Urm+kWMlDnMzEwLXfro0vJ9vC8t5YeLxGmw8xqYK+UHu53yp22mBLTQjCrkOMFLvAoBgpCkK79NtnOQgGNifbTQbCSFEQhI4Y2HSBIAjCdiAiKwiCECCSLthGJP8qCIOHRLKCIAgBcjPcs9NjaEAvj00QhNYZ3M+yRLKCIAgBIiIrCIIQID298XV9f63nTgmCIPQPPRnJ3hL/o50egiAIXWLQP8+KZVk997XaSr77/DXf+w/dchP/9sO388m9t+3QiARBEFojsEj29OnTLC4usrlZ/X39rfJ/3nuf869u8ne/u9H1tgVBELpJYDnZoaEhNjc3uXjxIkePHmVoaKh5pTZ59rdv8exv61vGfOP+fV3vUxAEoR0Ci2RLwloS2iAiWkEQhF4nMJEdGhrqOaE1s2MoiuK8NOxnVJtkxxQ0w0BTFJSxLLbdlfPeeY1lOzXBEgRhkAn07oKhoSGOHDkCwObmJpcuXQqyu8aYWabTUfKWhWVZWFYOr22Wnlxg0rKwllKEMdCUJCuZVaesxVJKbicTBKF9AhVZr7B6BXdHCEeIopNUxqgVlKp5j+gaC+jxDHMirIIgbJHARNabIvCmDnaOBDnLwrLmYFpBqSO2giAI3SQwke0tgQXMLFkDIExqaZVMvEBxrU7ZxCRqIc0p11jQICuKLAhCBwR2C1dPCSxAOEXklIKSdN6reaxEvcIJcqsZxkYVx25QJW+1Z5ItCIIAffqNr1aR+2QFQdhp+kJkBUEQ+oJ6+0IAAASCSURBVJWefECMIAjCbkFEVhAEIUBEZAVBEAJERFYQBCFARGQFQRACRERWEAQhQERkBUEQAkREVhAEIUB62q22Eb+88iIfP3SAJ849XXXukWMP7sCIBEEQqunLSPaXV16keOXXW2/I0DwP6e5TzCxjjZ4o5ptj6QHl2ze8xuNpkWZzrN8ZmvtwdkHYGfpOZLsmsF3FdlGock8wNI8TQ6VIeJ0XGp0TkRCEfqavRLb3BNaODBVlAdTKcwbabITVkhNDPkp61Gt543FeqDrnuDRYFnlVJ9ko9AynWLKW2NXPFx+EOQq7lr4S2Y8fOsAjxx50XztPmNSSbWUzWXUuQW4phasLiUlUViiagLnIfEFlpqQaiZNk4joL7vNuyy4NiUkVVor9ndIQhAGmr0T2iXNPV73aw2+OqCR1/2kzy5jnvB1A2tGqLxXQSV7RWEAnSiQMrBUpqJMej7EwkSisFKtbNBZ04lMT1A3izCxjvpRCkznWKOMPlOsZSLZ2vDq90Ww8LRhW+uZooCljZI3y70oz8KVmxPRS6CX6SmS3hm2OSN5yzRHzviW+SfYUzLnLexU9qWEQJjWjUphfdEXVWNBRZ1L1ha8SM8tYUnd9xMziSvPyjmAsTLZj4thsjjauaaRvnuX61QaSrR+38pBU/O3VH4+BpswSWS2dX2VqfrSFjbkC6Vnnd5VX0ZMKysKk3cZqBtKnJI8t9AyDI7KOOeJJjxtCYtL7iQ+TyqWgZBvujbgSk6iFeRZNAIMFXWWyrquCHzM7hjI6z9SqRc6pE45EG1cKp1hyRGlyQWk9am46RxufaaQ3VVHPQLKd4zXaqzseYwGdAunRUiQ7SrpQO6L3Eycz5/yTS0yiEidz0r24REtpGUHoAfr2PlkvXcnPmlnGRtOQWcWyws77onMywcnMLNOLJhPMoqsztGJGY2gKSfJYtXxuVoqYJJxo2KS4AtHJ6og1kcujKrMsmqk+2viJExkB6nmo+YpmWF1qY1UgCH3GrolkRw6Ear5cqswRTbKznmh1rUjBE5WZi/MUPO2HJ6Zg/hSn5ilHTY0ws8zqKvlcjbKJk2TwjMU4RRon4jOzjHnWy2Z2Fj0+xUQrKtRsjg76grf9adIFJzKvZyDZ5Pi0L199ijTOeJuNp+o8GJqTauj43lhB6C12jcg2J0GulL9TFBRlGqY8S1dH+EadXOh0MUrcWz2cYiaqo9Oi4K0VKaCT9G0KlTaZwqTmMqyUxpKEfCmaC6eYi8y65UfT0fK5rc7RQWXB375VSh/YBpLuuJQFIqlw4+NWnmh61LOx5ZlL0/FUtquwMOlJZQjCLqCvPL7q3U3wyLEH/VGrh7UX17vWv6EpzEZW29iI2gactMaMJeIkCL3IrsjJbgvO8n/G6iGBxUlrxKcY2emBCIJQk10lshee/lv35/EHP9+1dg1NIamDmrd2MFq0b4eqzrCq5C3ZOBKEXqWv0gWN2I50gSAIQrvsGpEVBEHoRQbo7gJBEITtR0RWEAQhQERkBUEQAkREVhAEIUBEZAVBEALk/wOIL6+FmWDl7AAAAABJRU5ErkJggg==" alt="image-20211202093214587"></p> <h3 id="_1-2-2-java代码连接mysql数据库"><a href="#_1-2-2-java代码连接mysql数据库" class="header-anchor">#</a> 1.2.2 Java代码连接MySQL数据库</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/*步骤：
1、模块添加了依赖的mysql驱动相关库

2、在内存中加载驱动类（可选）
        更早版本mysql驱动类：org.gjt.mm.mysql.Driver
        最近版本：com.mysql.jdbc.Driver
        MySQL8.0版本：com.mysql.cj.jdbc.Driver
 
  //新版的mysql驱动jar可以省略这步，旧版的mysql驱动jar必须加这一步。
  // 因为新版mysql驱动jar包下有一个META-INF/services/java.sql.Driver文件
  //里面有填写mysql驱动类的全名称，DriverManager会自动读取这个文件，并加载对应的驱动类
  //后期使用数据库连接池，或者MyBatis等框架时，在配置文件中加这个驱动类的配置即可
 Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); 

3、连接数据库：通过DriverManager工具类获取数据库连接Connection的对象。
此时的Java程序是MySQL的一个客户端
连接数据库：
     MySQL服务器主机的IP地址：
     端口号
     用户名
     密码
网址：http://www.atguigu.com

    String url = &quot;jdbc:mysql://localhost:3306/test&quot;;
    Connection conn = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;);
    
    MySQL8使用低版本的jar包时，url需要加参数：serverTimezone=UTC，否则会报错：
    Exception in thread &quot;main&quot; java.sql.SQLException: The server time zone value '�й���׼ʱ��' 
    String url = &quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;;
    


4、断开连接：使用close方法。
 */</span>
</code></pre></div><p><img src="/Java-Resource/assets/img/image-20211202095222692.90e273d8.png" alt="image-20211202095222692"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJDBC</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span>  <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;conn = &quot;</span> <span class="token operator">+</span> conn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-3-实现增删改查"><a href="#_1-3-实现增删改查" class="header-anchor">#</a> 1.3 实现增删改查</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/*步骤：
1、模块添加了依赖的mysql驱动相关库

2、在内存中加载驱动类（可选）
 Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); 

3、连接数据库
通过DriverManager工具类获取数据库连接Connection的对象。
    String url = &quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;;
    Connection conn = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;);

 4、操作数据库
（1）通过Connection对象获取Statement或PreparedStatement对象
（2）通过Statement或PreparedStatement对象执行sql
执行增、删、改：int executeUpate()
执行查询：ResultSet executeQuery()
（3）如果服务器有查询结果返回，需要用ResultSet接收
遍历结果集的方法：
boolean next()：判断是否还有下一行
getString(字段名或序号),getInt(字段名或序号),getObject(字段名或序号)

5、释放资源（close）
 */</span>
</code></pre></div><h3 id="_1-3-1-添加数据"><a href="#_1-3-1-添加数据" class="header-anchor">#</a> 1.3.1 添加数据</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
用JDBC实现添加一条记录到atguigu数据库的t_department表中。

mysql&gt; desc t_department;
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| did         | int          | NO   | PRI | NULL    | auto_increment |
| dname       | varchar(20)  | NO   | UNI | NULL    |                |
| description | varchar(200) | YES  |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+
3 rows in set (0.01 sec)


mysql&gt; select * from t_department;
+-----+--------+------------------+
| did | dname  | description      |
+-----+--------+------------------+
|   1 | 研发部 | 负责研发工作     |
|   2 | 人事部 | 负责人事管理工作 |
|   3 | 市场部 | 负责市场推广工作 |
|   4 | 财务部 | 负责财务管理工作 |
|   5 | 后勤部 | 负责后勤保障工作 |
|   6 | 测试部 | 负责测试工作     |
+-----+--------+------------------+
6 rows in set (0.00 sec)

步骤：
1、一个项目引入一次数据库驱动jar就可以
2、建立数据库连接
（1）加载驱动类：通过Class类的forName方法注册驱动
（2）获取数据库连接
通过DriverManager类的静态方法获取数据库连接对象
3、通过数据库连接对象获取Statement或PreparedStatement对象，用来执行sql
4、通过Statement或PreparedStatement对象调用
（1）int executeUpdate()：执行insert,update,delete等更新数据库数据的sql

5、关闭，释放各种资源
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestInsert</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,'测试数据部门','测试数据部门简介')&quot;</span><span class="token punctuation">;</span><span class="token comment">//发给服务器的sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO流  网络编程的socket.getOutputStream()发生数据用的</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//返回sql影响的记录数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;添加成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;添加失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
mysql&gt; select * from t_department;
+-----+--------------+------------------+
| did | dname        | description      |
+-----+--------------+------------------+
|   1 | 研发部       | 负责研发工作     |
|   2 | 人事部       | 负责人事管理工作 |
|   3 | 市场部       | 负责市场推广工作 |
|   4 | 财务部       | 负责财务管理工作 |
|   5 | 后勤部       | 负责后勤保障工作 |
|   6 | 测试部       | 负责测试工作     |
|   7 | 测试数据部门 | 测试数据部门简介 |
+-----+--------------+------------------+
7 rows in set (0.00 sec)
         */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_1-3-2-修改数据"><a href="#_1-3-2-修改数据" class="header-anchor">#</a> 1.3.2 修改数据</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUpdate</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = 'xx' where did = 7&quot;</span><span class="token punctuation">;</span><span class="token comment">//发给服务器的sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO流  网络编程的socket.getOutputStream()发生数据用的</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//返回sql影响的记录数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;修改成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;修改失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
mysql&gt; select * from t_department;
+-----+--------------+------------------+
| did | dname        | description      |
+-----+--------------+------------------+
|   1 | 研发部       | 负责研发工作     |
|   2 | 人事部       | 负责人事管理工作 |
|   3 | 市场部       | 负责市场推广工作 |
|   4 | 财务部       | 负责财务管理工作 |
|   5 | 后勤部       | 负责后勤保障工作 |
|   6 | 测试部       | 负责测试工作     |
|   7 | 测试数据部门 | xx               |
+-----+--------------+------------------+
7 rows in set (0.00 sec)
 */</span>
</code></pre></div><h3 id="_1-3-3-删除数据"><a href="#_1-3-3-删除数据" class="header-anchor">#</a> 1.3.3 删除数据</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDelete</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_department where did = 7&quot;</span><span class="token punctuation">;</span><span class="token comment">//发给服务器的sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO流  网络编程的socket.getOutputStream()发生数据用的</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//返回sql影响的记录数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;删除成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;删除失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
mysql&gt; select * from t_department;
+-----+--------+------------------+
| did | dname  | description      |
+-----+--------+------------------+
|   1 | 研发部 | 负责研发工作     |
|   2 | 人事部 | 负责人事管理工作 |
|   3 | 市场部 | 负责市场推广工作 |
|   4 | 财务部 | 负责财务管理工作 |
|   5 | 后勤部 | 负责后勤保障工作 |
|   6 | 测试部 | 负责测试工作     |
+-----+--------+------------------+
6 rows in set (0.00 sec)
 */</span>
</code></pre></div><h3 id="_1-3-4-查询数据"><a href="#_1-3-4-查询数据" class="header-anchor">#</a> 1.3.4 查询数据</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
步骤：
1、一个项目引入一次数据库驱动jar就可以
2、建立数据库连接
（1）加载驱动类：通过Class类的forName方法注册驱动
（2）获取数据库连接
通过DriverManager类的静态方法获取数据库连接对象
3、通过数据库连接对象获取Statement或PreparedStatement对象，用来执行sql
4、通过Statement或PreparedStatement对象调用
（1）int executeUpdate()：执行insert,update,delete等更新数据库数据的sql
（2）ResultSet executeQuery()：执行select查询的sql，返回一个结果集
（3）boolean execute()：可以用来执行DDL语句


遍历结果集ResultSet的方法：
boolean next()：判断是否还有下一行
getString(字段名或序号),getInt(字段名或序号),getObject(字段名或序号)

5、关闭，释放各种资源
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSelect</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_department&quot;</span><span class="token punctuation">;</span><span class="token comment">//发给服务器的sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO流  网络编程的socket.getOutputStream()发生数据用的</span>

        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//==&gt;IO流  输入流，又像是集合和迭代器的集成</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//while循环一次，迭代一行，遍历一行</span>
            <span class="token keyword">int</span> did <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;did&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//get一次得到一个单元格的数据</span>
            <span class="token class-name">String</span> dname <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;dname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> decription <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>did <span class="token operator">+</span><span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> dname <span class="token operator">+</span><span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> decription<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="第二章-轻松处理各种问题"><a href="#第二章-轻松处理各种问题" class="header-anchor">#</a> 第二章 轻松处理各种问题</h1> <h2 id="_2-1-避免sql拼接问题"><a href="#_2-1-避免sql拼接问题" class="header-anchor">#</a> 2.1 避免sql拼接问题</h2> <h3 id="准备代码和sql"><a href="#准备代码和sql" class="header-anchor">#</a> 准备代码和sql</h3> <div class="language-mysql extra-class"><pre class="language-text"><code>        Scanner input = new Scanner(System.in);
        System.out.print(&quot;请输入姓名：&quot;);
        String ename = input.next();//李四

        System.out.print(&quot;请输入薪资：&quot;);
        double salary = input.nextDouble();//15000

        System.out.print(&quot;请输入出生日期：&quot;);
        String birthday = input.next();//1990-1-1

        System.out.print(&quot;请输入性别：&quot;);
        char gender = input.next().charAt(0);//男

        System.out.print(&quot;请输入手机号码：&quot;);
        String tel = input.next();//13578595685

        System.out.print(&quot;请输入邮箱：&quot;);
        String email = input.next();//zhangsan@atguigu.com
        
        input.close();
</code></pre></div><div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(值列表);
</code></pre></div><h3 id="问题演示代码"><a href="#问题演示代码" class="header-anchor">#</a> 问题演示代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
避免sql拼接问题

演示：从键盘输入数据，存储到atguigu数据库的t_employee表中。

mysql&gt; desc t_employee;
+----------------+----------------------------------+------+-----+---------+----------------+
| Field          | Type                             | Null | Key | Default | Extra          |
+----------------+----------------------------------+------+-----+---------+----------------+
| eid            | int                              | NO   | PRI | NULL    | auto_increment |
| ename          | varchar(20)                      | NO   |     | NULL    |                |
| salary         | double                           | NO   |     | NULL    |                |
| commission_pct | decimal(3,2)                     | YES  |     | NULL    |                |
| birthday       | date                             | NO   |     | NULL    |                |
| gender         | enum('男','女')                  | NO   |     | 男      |                |
| tel            | char(11)                         | NO   |     | NULL    |                |
| email          | varchar(32)                      | NO   |     | NULL    |                |
| address        | varchar(150)                     | YES  |     | NULL    |                |
| work_place     | set('北京','深圳','上海','武汉') | NO   |     | 北京    |                |
| hiredate       | date                             | NO   |     | NULL    |                |
| job_id         | int                              | YES  | MUL | NULL    |                |
| mid            | int                              | YES  | MUL | NULL    |                |
| did            | int                              | YES  | MUL | NULL    |                |
+----------------+----------------------------------+------+-----+---------+----------------+
14 rows in set (0.00 sec)


PreparedStatement接口是Statement接口的子接口的。
Statement接口是不支持 ？ 形式的sql，只能拼接。
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSQLConcat</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入姓名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//李四</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入薪资：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入出生日期：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入性别：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//男</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入手机号码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入邮箱：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token comment">//给t_employee表中的有非空约束的字段赋值，因为work_place有默认值，这里就没有管它</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;'&quot;</span> <span class="token operator">+</span> ename <span class="token operator">+</span><span class="token string">&quot;',&quot;</span> <span class="token operator">+</span> <span class="token comment">//这里的'，是mysql中表示字符串和日期的单引号</span>
                salary <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;'&quot;</span> <span class="token operator">+</span> birthday <span class="token operator">+</span><span class="token string">&quot;',&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;'&quot;</span> <span class="token operator">+</span> gender <span class="token operator">+</span><span class="token string">&quot;',&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;'&quot;</span> <span class="token operator">+</span> tel <span class="token operator">+</span><span class="token string">&quot;',&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;'&quot;</span> <span class="token operator">+</span> email <span class="token operator">+</span><span class="token string">&quot;',&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;curdate()&quot;</span> <span class="token operator">+</span>   <span class="token comment">//mysql中日期函数，获取当前系统时间</span>
                <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//C：通过连接对象，获取PreparedStatement对象</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//D：执行sql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;添加成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;添加失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//E：释放连接等资源</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入姓名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//李四</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入薪资：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入出生日期：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入性别：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//男</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入手机号码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入邮箱：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token comment">//给t_employee表中的有非空约束的字段赋值，因为work_place有默认值，这里就没有管它</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//这里的？就像占位符，表示要给几个字段赋值</span>
        <span class="token comment">//C：通过连接对象，获取PreparedStatement对象</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此时对sql进行预编译，里面是带？的</span>

        <span class="token comment">//要给每一个？指定具体的值</span>
        <span class="token comment">/*
        PreparedStatement支持给每一个字段指定值时，确定数据类型，例如：
        pst.setString(1,ename);
        pst.setDouble(2,salary);
        ...
        但是这样有点麻烦，还要一一去确定数据类型
        PreparedStatement支持用Object统一处理
        pst.setObject(1,ename);
        pst.setObject(2,salary);
         */</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的1，表示第1个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的2，表示第2个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的3，表示第3个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的4，表示第4个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的5，表示第5个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的6，表示第6个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">&quot;curdate()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的7，表示第7个？</span>
        <span class="token comment">//每一个？与你要赋值的字段对应，不能对错了</span>

        <span class="token comment">//D：执行sql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;添加成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;添加失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
        (1)上面的代码执行出错了：java.sql.SQLException: Data truncated for column 'gender' at row 1
        原因： pst.setObject(4,gender); 把gender自动包装为Character对象
        解决方案：把char类型用String类型表示。

        (2)com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Incorrect date value: 'curdate()' for column 'hiredate' at row 1
         pst.setObject(7,&quot;curdate()&quot;);  &quot;curdate()&quot;代表字符串，setObject把curdate()识别为一个字符串，而不是mysql函数， 这句代码给hiredate字段赋值的是一个String
        hiredate需要的是一个日期。

        解决方案：pst.setObject(7, new Date());
         */</span>

        <span class="token comment">//E：释放连接等资源</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入姓名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//李四</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入薪资：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入出生日期：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入性别：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        char gender = input.next().charAt(0);//男</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//男</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入手机号码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入邮箱：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token comment">//给t_employee表中的有非空约束的字段赋值，因为work_place有默认值，这里就没有管它</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//这里的？就像占位符，表示要给几个字段赋值</span>
        <span class="token comment">//C：通过连接对象，获取PreparedStatement对象</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此时对sql进行预编译，里面是带？的</span>

        <span class="token comment">//要给每一个？指定具体的值</span>
        <span class="token comment">/*
        PreparedStatement支持给每一个字段指定值时，确定数据类型，例如：
        pst.setString(1,ename);
        pst.setDouble(2,salary);
        ...
        但是这样有点麻烦，还要一一去确定数据类型
        PreparedStatement支持用Object统一处理
        pst.setObject(1,ename);
        pst.setObject(2,salary);
         */</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的1，表示第1个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的2，表示第2个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的3，表示第3个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的4，表示第4个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的5，表示第5个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的6，表示第6个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的7，表示第7个？</span>
        <span class="token comment">//每一个？与你要赋值的字段对应，不能对错了</span>

        <span class="token comment">//D：执行sql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;添加成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;添加失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
        上面的代码执行出错了：java.sql.SQLException: Data truncated for column 'gender' at row 1
        原因： pst.setObject(4,gender); 把gender自动包装为Character对象
        解决方案：把char类型用String类型表示。
         */</span>

        <span class="token comment">//E：释放连接等资源</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-2-避免sql注入问题"><a href="#_2-2-避免sql注入问题" class="header-anchor">#</a> 2.2 避免sql注入问题</h2> <h3 id="准备代码和sql-2"><a href="#准备代码和sql-2" class="header-anchor">#</a> 准备代码和sql</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入你要查询的员工的编号：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> id <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-mysql extra-class"><pre class="language-text"><code>select * from t_employee where eid = 值;
</code></pre></div><h3 id="问题演示代码-2"><a href="#问题演示代码-2" class="header-anchor">#</a> 问题演示代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
避免sql注入问题

演示：从键盘输入员工编号，查询员工信息。每一个员工都可以输入自己的编号，查看自己的信息。
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSQLInject</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入你要查询的员工的编号：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第一种正常输入：1</span>
        <span class="token comment">// 第二种恶意输入：1 or 1=1  第一个1表示员工编号， 后面 or 1= 1表示条件，而1=1是永远成立，其他条件全部失效</span>

        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_employee where eid = &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sql = &quot;</span> <span class="token operator">+</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//select * from t_employee where eid = 1 or 1=1</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//执行查询</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        ResultSet接口提供了
        (1)boolean next()：判断是否有下一条记录
        (2)获取某个单元格的数据
        String getString(字段名)
        int getInt(字段名)
        double getDouble(字段名)
        ...

        有点麻烦，需要一一去对应字段名
        Object getObject(字段名)
        Object getObject(字段的序号)  从1开始。
         */</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//while循环一次，代表一行</span>
            <span class="token comment">//t_employee有14个字段</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">14</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//for循环一次，代表一行中的一个单元格</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
用户输入 1 or 1=1，盗取了表中的所有数据。
1	孙洪亮	28000.0	0.65	1980-10-08	男	13789098765	shl@atguigu.com	白庙村西街	北京,深圳	2011-07-28	1	1	1
2	何进	7001.0	0.10	1984-08-03	男	13456732145	hj@atguigu.com	半截塔存	深圳,上海	2015-07-03	2	1	1
3	邓超远	8000.0	null	1985-04-09	男	18678973456	dcy666@atguigu.com	宏福苑	北京,深圳,上海,武汉	2014-07-01	3	7	1
4	黄熙萌	9456.0	null	1986-09-07	女	13609876789	hxm@atguigu.com	白庙村东街	深圳,上海,武汉	2015-08-08	8	22	3
5	陈浩	8567.0	null	1978-08-02	男	13409876545	ch888@atguigu.com	回龙观	北京,深圳,上海	2015-01-01	3	7	1
6	韩庚年	12000.0	null	1985-04-03	男	18945678986	hgn@atguigu.com	龙泽	深圳,上海	2015-02-02	3	2	1
7	贾宝玉	15700.0	0.24	1982-08-02	男	15490876789	jby@atguigu.com	霍营	北京,武汉	2015-03-03	2	1	1
8	李晨熙	9000.0	0.40	1983-03-02	女	13587689098	lc@atguigu.com	东三旗	深圳,上海,武汉	2015-01-06	4	1	1
9	李易峰	7897.0	null	1984-09-01	男	13467676789	lyf@atguigu.com	西山旗	武汉	2015-04-01	3	7	1
10	陆风	8789.0	null	1989-04-02	男	13689876789	lf@atguigu.com	天通苑一区	北京	2014-09-03	2	1	1
11	黄冰茹	15678.0	null	1983-05-07	女	13787876565	hbr@atguigu.com	立水桥	深圳	2014-04-04	4	1	1
12	孙红梅	9000.0	null	1986-04-02	女	13576234554	shm@atguigu.com	立城苑	上海	2014-02-08	3	7	1
13	李冰冰	18760.0	null	1987-04-09	女	13790909887	lbb@atguigu.com	王府温馨公寓	北京	2015-06-07	3	2	1
14	谢吉娜	18978.0	0.25	1990-01-01	女	13234543245	xjn@atguigu.com	园中园	上海,武汉	2015-09-05	5	14	2
15	董吉祥	8978.0	null	1987-05-05	男	13876544333	djx@atguigu.com	小辛庄	北京,上海	2015-08-04	6	14	2
16	彭超越	9878.0	null	1988-03-06	男	18264578930	pcy@atguigu.com	西二旗	深圳,武汉	2015-03-06	8	22	3
17	李诗雨	9000.0	null	1990-08-09	女	18567899098	lsy@atguigu.com	清河	北京,深圳,武汉	2013-06-09	8	22	3
18	舒淇格	16788.0	0.10	1978-09-04	女	18654565634	sqg@atguigu.com	名流花园	北京,深圳,武汉	2013-04-05	9	18	4
19	周旭飞	7876.0	null	1988-06-13	女	13589893434	sxf@atguigu.com	小汤山	北京,深圳	2014-04-07	10	18	4
20	章嘉怡	15099.0	0.10	1989-12-11	女	15634238979	zjy@atguigu.com	望都家园	北京	2015-08-04	11	20	5
21	白露	9787.0	null	1989-09-04	女	18909876789	bl@atguigu.com	西湖新村	上海	2014-06-05	12	20	5
22	刘烨	13099.0	0.32	1990-11-09	男	18890980989	ly@atguigu.com	多彩公寓	北京,上海	2016-08-09	7	22	3
23	陈纲	13090.0	null	1990-02-04	男	18712345632	cg@atguigu.com	天通苑二区	深圳	2016-05-09	3	2	1
24	吉日格勒	10289.0	null	1990-04-01	男	17290876543	jrgl@163.com	北苑	北京	2017-02-06	12	20	5
25	额日古那	9087.0	null	1989-08-01	女	18709675645	ergn@atguigu.com	望京	北京,上海	2017-09-01	3	2	1
26	李红	5000.0	null	1995-02-15	女	15985759663	lihong@atguigu.com	冠雅苑	北京	2021-09-01	null	null	null
27	周洲	8000.0	null	1990-01-01	男	13574528569	zhouzhou@atguigu.com	冠华苑	北京,深圳	2020-08-15	3	2	null
28	张三	15000.0	null	1999-05-05	男	10086	zhangsan@atguigu.com	null	北京	2021-12-03	null	null	null
29	李四	14000.0	null	2000-09-09	女	10010	lisi@atguigu.com	null	北京	2021-12-03	null	null	null

 */</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入你要查询的员工的编号：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第一种正常输入：1</span>
        <span class="token comment">// 第二种恶意输入：1 or 1=1  第一个1表示员工编号， 后面 or 1= 1表示条件，而1=1是永远成立，其他条件全部失效</span>

        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_employee where eid = ? &quot;</span><span class="token punctuation">;</span><span class="token comment">//不用拼接了</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//给？指定值</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//因为这里把 &quot;2 or 1=1&quot;当成一个整体赋值给eid</span>
        <span class="token comment">//select * from t_employee where eid = '2 or 1=1';</span>
        <span class="token comment">/*
        eid字段是int类型，mysql在解析时，发现给eid赋值了字符串，会把字符串尽量转为int类型的值。
        SELECT '2 or 1=1'+0;  得到结果是2。
        select * from t_employee where eid = '2 or 1=1';
        等价于
        select * from t_employee where eid = 2;
         */</span>

        <span class="token comment">//执行查询</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        ResultSet接口提供了
        (1)boolean next()：判断是否有下一条记录
        (2)获取某个单元格的数据
        String getString(字段名)
        int getInt(字段名)
        double getDouble(字段名)
        ...

        有点麻烦，需要一一去对应字段名
        Object getObject(字段名)
        Object getObject(字段的序号)  从1开始。
         */</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//while循环一次，代表一行</span>
            <span class="token comment">//t_employee有14个字段</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">14</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//for循环一次，代表一行中的一个单元格</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-3-使用字节io流读取图片等给blob等二进制类型数据赋值"><a href="#_2-3-使用字节io流读取图片等给blob等二进制类型数据赋值" class="header-anchor">#</a> 2.3 使用字节IO流读取图片等给blob等二进制类型数据赋值</h2> <h3 id="准备代码和sql-3"><a href="#准备代码和sql-3" class="header-anchor">#</a> 准备代码和sql</h3> <div class="language-java extra-class"><pre class="language-java"><code>        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入用户名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入密码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请选择照片：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里没有图形化界面，只能输入路径，通过IO流读取图片的内容</span>
        
		input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE `t_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL,
  `password` varchar(50) NOT NULL,
  `photo` blob,
  PRIMARY KEY (`id`)
);

添加记录：insert into t_user values(null,?,?,?);

修改表结构：ALTER TABLE t_user MODIFY photo MEDIUMBLOB;
</code></pre></div><h3 id="问题演示代码-3"><a href="#问题演示代码-3" class="header-anchor">#</a> 问题演示代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
CREATE TABLE `t_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL,
  `password` varchar(50) NOT NULL,
  `photo` blob,
  PRIMARY KEY (`id`)
);

mysql&gt; desc t_user;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| id       | int         | NO   | PRI | NULL    | auto_increment |
| username | varchar(20) | NO   |     | NULL    |                |
| password | varchar(50) | NO   |     | NULL    |                |
| photo    | blob        | YES  |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
4 rows in set (0.00 sec)
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestBlob</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入用户名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入密码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请选择照片：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里没有图形化界面，只能输入路径，通过IO流读取图片的内容</span>

        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_user values(null,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//设置？的值</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        pst.setObject(3, path);//不对，因为path是一个路径</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//用字节IO流来表示二进制数据</span>

        <span class="token comment">//执行sql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len <span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;添加成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;添加失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
当存储的图片特别大时：
（1）com.mysql.cj.jdbc.exceptions.PacketTooBigException: Packet for query is too large (6,638,795 &gt; 4,194,304).
You can change this value on the server by setting the 'max_allowed_packet' variable.
解决方案：修改my.ini配置文件      max_allowed_packet变量的值
先停止服务，然后修改my.ini文件，再重启服务

（2）com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'photo' at row 1
问题是：blob类型的数据，存不下这么大的图片
解决方案：修改字段的数据类型

alter table t_user modify photo mediumblob;

mysql&gt; alter table t_user modify photo mediumblob;
ERROR 2013 (HY000): Lost connection to MySQL server during query
No connection. Trying to reconnect...
Connection id:    9
Current database: atguigu

Query OK, 1 row affected (0.08 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql&gt; desc t_user;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| id       | int         | NO   | PRI | NULL    | auto_increment |
| username | varchar(20) | NO   |     | NULL    |                |
| password | varchar(50) | NO   |     | NULL    |                |
| photo    | mediumblob  | YES  |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
4 rows in set (0.01 sec)
 */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><img src="/Java-Resource/assets/img/image-20211203112609141.0efbed90.png" alt="image-20211203112609141"></p> <p><img src="/Java-Resource/assets/img/image-20211203112629195.5c5a9734.png" alt="image-20211203112629195"></p> <p><img src="/Java-Resource/assets/img/image-20211203112805124.9418245d.png" alt="image-20211203112805124"></p> <h2 id="_2-4-获取自增长键值"><a href="#_2-4-获取自增长键值" class="header-anchor">#</a> 2.4 获取自增长键值</h2> <h3 id="准备代码和sql-4"><a href="#准备代码和sql-4" class="header-anchor">#</a> 准备代码和sql</h3> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>		<span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入姓名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//李四</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入薪资：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入出生日期：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入性别：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//男  mysql的gender是枚举类型，这里用String处理</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入手机号码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入邮箱：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

		input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="问题演示代码-4"><a href="#问题演示代码-4" class="header-anchor">#</a> 问题演示代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
获取自增长键值：
mysql中很多表都是有自增长字段，特别是id。
当我们添加了一个员工、部门，添加成功后，需要立刻返回该员工、部门的自增长的id值。

（1）在用Connection数据库连接对象获取PreparedStatement对象时，要加一个参数
PreparedStatement pst = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
这里Statement.RETURN_GENERATED_KEYS表示，执行sql后，返回自增长键值

（2）执行完成之后，需要从PreparedStatement对象中获取自增长键值
 ResultSet rs = pst.getGeneratedKeys(); //方法别调错
if(rs.next()){ //因为只有一条记录，所以只有一个自增长键值，用if即可
    System.out.println(&quot;新员工编号是：&quot; + rs.getObject(1));//因为自增长键值只有一个，所以这里直接getObject(1)即可
}
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestGenerateKey</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入姓名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//李四</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入薪资：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入出生日期：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入性别：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//男  mysql的gender是枚举类型，这里用String处理</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入手机号码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入邮箱：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token comment">//给t_employee表中的有非空约束的字段赋值，因为work_place有默认值，这里就没有管它</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//这里的？就像占位符，表示要给几个字段赋值</span>
        <span class="token comment">//C：通过连接对象，获取PreparedStatement对象</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">Statement</span><span class="token punctuation">.</span><span class="token constant">RETURN_GENERATED_KEYS</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此时对sql进行预编译，里面是带？的</span>
        <span class="token comment">//Statement.RETURN_GENERATED_KEYS表示，执行sql后，返回自增长键值</span>

        <span class="token comment">//要给每一个？指定具体的值</span>
        <span class="token comment">/*
        PreparedStatement支持给每一个字段指定值时，确定数据类型，例如：
        pst.setString(1,ename);
        pst.setDouble(2,salary);
        ...
        但是这样有点麻烦，还要一一去确定数据类型
        PreparedStatement支持用Object统一处理
        pst.setObject(1,ename);
        pst.setObject(2,salary);
         */</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的1，表示第1个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的2，表示第2个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的3，表示第3个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的4，表示第4个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的5，表示第5个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的6，表示第6个？</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的7，表示第7个？</span>
        <span class="token comment">//每一个？与你要赋值的字段对应，不能对错了</span>

        <span class="token comment">//D：执行sql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;添加成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;添加失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">getGeneratedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;新员工编号是：&quot;</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//因为自增长键值只有一个，所以这里直接getObject(1)即可</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//E：释放连接等资源</span>
        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_2-5-批处理"><a href="#_2-5-批处理" class="header-anchor">#</a> 2.5 批处理</h2> <h3 id="准备代码和sql-5"><a href="#准备代码和sql-5" class="header-anchor">#</a> 准备代码和sql</h3> <div class="language-mysql extra-class"><pre class="language-text"><code>insert into t_department values(null,?,?)
</code></pre></div><h3 id="问题演示代码-5"><a href="#问题演示代码-5" class="header-anchor">#</a> 问题演示代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
批处理：
    批量执行一组sql。大多数情况下都是批量执行insert语句。

    演示：给部门表批量添加1000条部门测试信息。

MySQL服务器端，默认批处理功能没有开启。需要通过参数告知mysql服务器，开启批处理功能。
在url后面再加一个参数 rewriteBatchedStatements=true

url的格式：
    jdbc:mysql://localhost:3306/atguigu
    如果要加参数，需要用一个?，表示后面是参数

    jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC

    如果有多个参数，参数之间使用&amp;连接，
    每一个参数都是key=value的格式。

 jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true

 如何实现批处理？
 （1）url中加rewriteBatchedStatements=true
jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true

（2）PreparedStatement对象调用
A：addBatch()
B：executeBatch()

（3）不要把values写错value（学生问题）
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestBatch</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//上面的sql是重复使用的，PreparedStatement对象也重复使用，不用new1000个对象。</span>
        <span class="token comment">//mysql服务器端也可以优化，提高性能</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//设置1000次？的值</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;测试&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;测试简介&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

            pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里就不接收返回值了</span>
            <span class="token comment">//逐条添加，每设置一次？，就立刻添加一条</span>
            <span class="token comment">//设置完？是在内存中，添加到表中，是要用IO流写到文件中，</span>
            <span class="token comment">// 添加1000条意味着要用IO流与文件通信1000次</span>
        <span class="token punctuation">}</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;耗时：&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//耗时：4700</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//上面的sql是重复使用的，PreparedStatement对象也重复使用，不用new1000个对象。</span>
        <span class="token comment">//mysql服务器端也可以优化，提高性能</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1001</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">2000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//设置1000次？的值</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;测试&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;测试简介&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//            pst.executeUpdate();//不用设置一次？，就执行一次</span>
            pst<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//先攒着这些数据，设置完？，sql会重新编译一下，生成一条新的完整的sql</span>
        <span class="token punctuation">}</span>
        pst<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最后一口气执行</span>

<span class="token comment">//        这里虽然调用了批处理执行sql的方法，但是url中没有告诉mysql开启批处理的功能，仍然是一条一条添加的</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;耗时：&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//耗时：4714</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//上面的sql是重复使用的，PreparedStatement对象也重复使用，不用new1000个对象。</span>
        <span class="token comment">//mysql服务器端也可以优化，提高性能</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2001</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">3000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//设置1000次？的值</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;测试&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;测试简介&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//            pst.executeUpdate();//不用设置一次？，就执行一次</span>
            pst<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//先攒着这些数据，设置完？，sql会重新编译一下，生成一条新的完整的sql</span>
        <span class="token punctuation">}</span>
        pst<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最后一口气执行</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;耗时：&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//耗时：1625</span>
    <span class="token punctuation">}</span>
    
        <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span><span class="token comment">//如果把values写错value，批处理不起作用</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//上面的sql是重复使用的，PreparedStatement对象也重复使用，不用new1000个对象。</span>
        <span class="token comment">//mysql服务器端也可以优化，提高性能</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2001</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">3000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//设置1000次？的值</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;测试&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;测试简介&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//            pst.executeUpdate();//不用设置一次？，就执行一次</span>
            pst<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//先攒着这些数据，设置完？，sql会重新编译一下，生成一条新的完整的sql</span>
        <span class="token punctuation">}</span>
        pst<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最后一口气执行</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;耗时：&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//耗时：4625</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_2-6-事务处理"><a href="#_2-6-事务处理" class="header-anchor">#</a> 2.6 事务处理</h2> <h3 id="准备代码和sql-6"><a href="#准备代码和sql-6" class="header-anchor">#</a> 准备代码和sql</h3> <div class="language-mysql extra-class"><pre class="language-text"><code>演示：
	update t_department set description = 'xx' where did = 2;
	update t_department set description = 'yy' where did = 3;

	故意把其中一条sql语句写错。

    update t_department set description = 'xx' where did = 2;
	update t_department set description = 'yy' what did = 3;  #what是错误的
</code></pre></div><h3 id="问题演示代码-6"><a href="#问题演示代码-6" class="header-anchor">#</a> 问题演示代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
如果多条sql要组成一个事务，要么一起成功，要么一起失败。
例如：订单
    （1）修改商品表的商品库存和销量
    （2）订单表新建订单数据
    （3）订单明细表新建订单明细记录（多条）
    ....
    这些sql要么一起成功，要么都还原到最初。

演示：
	update t_department set description = 'xx' where did = 2;
	update t_department set description = 'yy' where did = 3;

	故意把其中一条sql语句写错。

    update t_department set description = 'xx' where did = 2;
	update t_department set description = 'yy' what did = 3;  #what是错误的，故意制造错误

JDBC如何管理事务？
（1）mysql默认是自动提交事务，每执行一条语句成功后，自动提交。
需要开启手动提交模式。

Connection连接对象.setAutoCommit(false);//取消自动提交模式，开始手动提交模式

(2)sql执行成功，别忘了提交事务
Connection连接对象.commit();

（3）sql执行失败，回滚事务
Connection连接对象.rollback();
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTransaction</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//把驱动类加载到内存中</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B：获取数据库连接对象</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; 网络编程的Socket</span>

        connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取消自动提交模式，开始手动提交模式</span>

        <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = 'xx' where did = 2&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = 'yy' what did = 3&quot;</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span> p1 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">PreparedStatement</span> p2 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            p1<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            p2<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;两条更新成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//提交事务</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//回滚事务</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h1 id="第三章-数据库连接池"><a href="#第三章-数据库连接池" class="header-anchor">#</a> 第三章 数据库连接池</h1> <h2 id="_1、什么是数据库连池"><a href="#_1、什么是数据库连池" class="header-anchor">#</a> 1、什么是数据库连池</h2> <p>数据库连接对象的缓冲区。负责申请，分配管理，释放连接的操作。</p> <h2 id="_2、为什么要使用数据库连接池"><a href="#_2、为什么要使用数据库连接池" class="header-anchor">#</a> 2、为什么要使用数据库连接池</h2> <p>（1）不使用数据库连接池，每次都通过DriverManager获取新连接，用完直接抛弃断开，连接的利用率太低，太浪费。
（2）对于数据库服务器来说，压力太大了。我们数据库服务器和Java程序对连接数也无法控制，很容易导致数据库服务器崩溃。</p> <p>我们就希望能管理连接。</p> <ul><li>我们可以建立一个连接池，这个池中可以容纳一定数量的连接对象，一开始，我们可以先替用户先创建好一些连接对象，等用户要拿连接对象时，就直接从池中拿，不用新建了，这样也可以节省时间。然后用户用完后，放回去，别人可以接着用。</li> <li>可以提高连接的使用率。当池中的现有的连接都用完了，那么连接池可以向服务器申请新的连接放到池中。
直到池中的连接达到“最大连接数”，就不能在申请新的连接了，如果没有拿到连接的用户只能等待。</li></ul> <h2 id="_3、市面上有很多现成的数据库连接池技术"><a href="#_3、市面上有很多现成的数据库连接池技术" class="header-anchor">#</a> 3、市面上有很多现成的数据库连接池技术</h2> <ul><li>JDBC 的数据库连接池使用 javax.sql.DataSource 来表示，DataSource 只是一个接口（通常被称为数据源），该接口通常由服务器(Weblogic, WebSphere, Tomcat)提供实现，也有一些开源组织提供实现：
<ul><li><strong>DBCP</strong> 是Apache提供的数据库连接池，<strong>速度相对c3p0较快</strong>，但因自身存在BUG，Hibernate3已不再提供支持</li> <li><strong>C3P0</strong> 是一个开源组织提供的一个数据库连接池，<strong>速度相对较慢，稳定性还可以</strong></li> <li><strong>Proxool</strong> 是sourceforge下的一个开源项目数据库连接池，有监控连接池状态的功能，<strong>稳定性较c3p0差一点</strong></li> <li><strong>BoneCP</strong> 是一个开源组织提供的数据库连接池，速度快</li> <li><strong>Druid</strong> 是阿里提供的数据库连接池，据说是集DBCP 、C3P0 、Proxool 优点于一身的数据库连接池</li></ul></li></ul> <h2 id="_4、如何使用德鲁伊数据库连接池"><a href="#_4、如何使用德鲁伊数据库连接池" class="header-anchor">#</a> 4、如何使用德鲁伊数据库连接池</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>引入jar包
    和引入mysql驱动jar方式一样
（<span class="token number">3</span>）创建数据库连接池对象
（<span class="token number">4</span>）获取连接
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>pool</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestPool</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pro<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driverClassName&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pro<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pro<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pro<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pro<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;initialSize&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示预先缓存5个连接</span>
        pro<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;maxActive&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最多的连接数量10</span>
        pro<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;maxWait&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//等待连接的时间，超过时间就报异常</span>
         <span class="token class-name">DataSource</span> ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*        Connection connection = ds.getConnection();
        System.out.println(&quot;connection = &quot; + connection);*/</span>

<span class="token comment">/*        for(int i=1; i&lt;=15; i++){
            Connection connection = ds.getConnection();
            System.out.println(&quot;第&quot; + i+ &quot;个connection = &quot; + connection);

            //这里没有写connection.close()，连接没有关闭，没有还给连接池，一直占用
//            connection.close();
        }*/</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">15</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;第&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&quot;个connection = &quot;</span> <span class="token operator">+</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>

                        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>配置</th> <th><strong>缺省</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>name</td> <td></td> <td>配置这个属性的意义在于，如果存在多个数据源，监控的时候可以通过名字来区分开来。 如果没有配置，将会生成一个名字，格式是：”DataSource-” + System.identityHashCode(this)</td></tr> <tr><td>jdbcUrl</td> <td></td> <td>连接数据库的url，不同数据库不一样。例如：<br>mysql : jdbc:mysql://10.20.153.104:3306/druid2 <br>oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto</td></tr> <tr><td>username</td> <td></td> <td>连接数据库的用户名</td></tr> <tr><td>password</td> <td></td> <td>连接数据库的密码。如果你不希望密码直接写在配置文件中，可以使用ConfigFilter。详细看这里：<a href="https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/druid/wiki/使用ConfigFilter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td>driverClassName</td> <td></td> <td>根据url自动识别 这一项可配可不配，如果不配置druid会根据url自动识别dbType，然后选择相应的driverClassName(建议配置下)</td></tr> <tr><td>initialSize</td> <td>0</td> <td>初始化时建立物理连接的个数。初始化发生在显示调用init方法，或者第一次getConnection时</td></tr> <tr><td>maxActive</td> <td>8</td> <td>最大连接池数量</td></tr> <tr><td>maxIdle</td> <td>8</td> <td>已经不再使用，配置了也没效果</td></tr> <tr><td>minIdle</td> <td></td> <td>最小连接池数量</td></tr> <tr><td>maxWait</td> <td></td> <td>获取连接时最大等待时间，单位毫秒。配置了maxWait之后，缺省启用公平锁，并发效率会有所下降，如果需要可以通过配置useUnfairLock属性为true使用非公平锁。</td></tr> <tr><td>poolPreparedStatements</td> <td>false</td> <td>是否缓存preparedStatement，也就是PSCache。PSCache对支持游标的数据库性能提升巨大，比如说oracle。在mysql下建议关闭。</td></tr> <tr><td>maxOpenPreparedStatements</td> <td>-1</td> <td>要启用PSCache，必须配置大于0，当大于0时，poolPreparedStatements自动触发修改为true。在Druid中，不会存在Oracle下PSCache占用内存过多的问题，可以把这个数值配置大一些，比如说100</td></tr> <tr><td>validationQuery</td> <td></td> <td>用来检测连接是否有效的sql，要求是一个查询语句。如果validationQuery为null，testOnBorrow、testOnReturn、testWhileIdle都不会其作用。</td></tr> <tr><td>testOnBorrow</td> <td>true</td> <td>申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</td></tr> <tr><td>testOnReturn</td> <td>false</td> <td>归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能</td></tr> <tr><td>testWhileIdle</td> <td>false</td> <td>建议配置为true，不影响性能，并且保证安全性。申请连接的时候检测，如果空闲时间大于timeBetweenEvictionRunsMillis，执行validationQuery检测连接是否有效。</td></tr> <tr><td>timeBetweenEvictionRunsMillis</td> <td></td> <td>有两个含义： 1)Destroy线程会检测连接的间隔时间2)testWhileIdle的判断依据，详细看testWhileIdle属性的说明</td></tr> <tr><td>numTestsPerEvictionRun</td> <td></td> <td>不再使用，一个DruidDataSource只支持一个EvictionRun</td></tr> <tr><td>minEvictableIdleTimeMillis</td> <td></td> <td></td></tr> <tr><td>connectionInitSqls</td> <td></td> <td>物理连接初始化的时候执行的sql</td></tr> <tr><td>exceptionSorter</td> <td></td> <td>根据dbType自动识别 当数据库抛出一些不可恢复的异常时，抛弃连接</td></tr> <tr><td>filters</td> <td></td> <td>属性类型是字符串，通过别名的方式配置扩展插件，常用的插件有： 监控统计用的filter:stat日志用的filter:log4j防御sql注入的filter:wall</td></tr> <tr><td>proxyFilters</td> <td></td> <td>类型是List，如果同时配置了filters和proxyFilters，是组合关系，并非替换关系</td></tr></tbody></table> <h1 id="第四章-jdbctools工具类"><a href="#第四章-jdbctools工具类" class="header-anchor">#</a> 第四章 JDBCTools工具类</h1> <h2 id="_4-1-druid-properties文件"><a href="#_4-1-druid-properties文件" class="header-anchor">#</a> 4.1 druid.properties文件</h2> <p><img src="data:image/png;base64,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" alt="image-20211202114429807"></p> <div class="language-java extra-class"><pre class="language-java"><code>#key<span class="token operator">=</span>value
driverClassName<span class="token operator">=</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span>
url<span class="token operator">=</span>jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>atguigu<span class="token operator">?</span>serverTimezone<span class="token operator">=</span><span class="token constant">UTC</span><span class="token operator">&amp;</span>rewriteBatchedStatements<span class="token operator">=</span><span class="token boolean">true</span>
username<span class="token operator">=</span>root
password<span class="token operator">=</span><span class="token number">123456</span>
initialSize<span class="token operator">=</span><span class="token number">5</span>
maxActive<span class="token operator">=</span><span class="token number">10</span>
maxWait<span class="token operator">=</span><span class="token number">1000</span>
</code></pre></div><h2 id="_4-2-jdbctools工具类1-0版"><a href="#_4-2-jdbctools工具类1-0版" class="header-anchor">#</a> 4.2 JDBCTools工具类1.0版</h2> <h3 id="_4-2-1-jdbctoolsversion1类"><a href="#_4-2-1-jdbctoolsversion1类" class="header-anchor">#</a> 4.2.1 JDBCToolsVersion1类</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCToolsVersion1</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span><span class="token comment">//静态代码块，JDBCToolsVersion1类初始化执行</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这么写，不能保证同一个线程，两次getConnection()得到的是同一个Connection对象</span>
                            <span class="token comment">//如果不能保证是同一个连接对象，就无法保证事务的管理</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">free</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//还给连接池</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestInsert</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCToolsVersion1</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_department VALUES(NULL,'保安部','负责安保工作')&quot;</span><span class="token punctuation">;</span>

        <span class="token class-name">Statement</span> s <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;len = &quot;</span> <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>


        s<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">JDBCToolsVersion1</span><span class="token punctuation">.</span><span class="token function">free</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-2-2-事务处理问题"><a href="#_4-2-2-事务处理问题" class="header-anchor">#</a> 4.2.2 事务处理问题</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateUtils1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">updateSQL</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCToolsVersion1</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//自动提交</span>
        <span class="token class-name">Statement</span> s <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            s <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
            s<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JDBCToolsVersion1</span><span class="token punctuation">.</span><span class="token function">free</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">//加上事务管理，或者说，手动提交事务模式</span>
        <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = 'xx' where did = 2&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = 'yy' what did = 3&quot;</span><span class="token punctuation">;</span><span class="token comment">//故意把where写错，写成what</span>
<span class="token comment">//        String sql2 = &quot;update t_department set description = 'yy' where did = 3&quot;;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">JDBCToolsVersion1</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不同的连接对象</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">UpdateUtils1</span><span class="token punctuation">.</span><span class="token function">updateSQL</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">UpdateUtils1</span><span class="token punctuation">.</span><span class="token function">updateSQL</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//提交事务</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//回滚事务</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
            <span class="token class-name">JDBCToolsVersion1</span><span class="token punctuation">.</span><span class="token function">free</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-3-使用threadlocal类"><a href="#_4-3-使用threadlocal类" class="header-anchor">#</a> 4.3 使用ThreadLocal类</h2> <p>其中ThreadLocal的介绍如下：</p> <p>JDK 1.2的版本中就提供java.lang.ThreadLocal，为解决多线程程序的并发问题提供了一种新的思路。使用这个工具类可以很简洁地编写出优美的多线程程序。通常用来在在多线程中管理共享数据库连接、Session等</p> <p>ThreadLocal用于保存某个线程共享变量，原因是在Java中，每一个线程对象中都有一个ThreadLocalMap&lt;ThreadLocal, Object&gt;，其key就是一个ThreadLocal，而Object即为该线程的共享变量。而这个map是通过ThreadLocal的set和get方法操作的。对于同一个static ThreadLocal，不同线程只能从中get，set，remove自己的变量，而不会影响其他线程的变量。</p> <p>1、ThreadLocal对象.get: 获取ThreadLocal中当前线程共享变量的值。</p> <p>2、ThreadLocal对象.set: 设置ThreadLocal中当前线程共享变量的值。</p> <p>3、ThreadLocal对象.remove: 移除ThreadLocal中当前线程共享变量的值。</p> <p><img src="/Java-Resource/assets/img/image-20211202150640186.1fdc5d82.png" alt="image-20211202150640186"></p> <p>线程（事务）结束后别忘了移除共享对象。<img src="/Java-Resource/assets/img/image-20210905181830880-16384272329281.2b6febb1.png" alt="image-20210905181830880"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestThreadLocal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">&quot;-&gt;&quot;</span> <span class="token operator">+</span>tl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
               这里有两个线程，每一个线程都有自己的ThreadLocalMap对象，
               它们此时都有一个key为tl的键值对，但是两个map中tl对应的value不一样，一个是atguigu，一个是mysql
                */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;线程1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;set之前：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                tl<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;atguigu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;set之后：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;休眠1秒之后：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                tl<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;移出之后：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token string">&quot;线程2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;set之前：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                tl<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;set之后：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;休眠1秒之后：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                tl<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;移出之后：&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_4-4-jdbctools工具类2-0版"><a href="#_4-4-jdbctools工具类2-0版" class="header-anchor">#</a> 4.4 JDBCTools工具类2.0版</h2> <h3 id="_4-4-1-jdbctoolsversion1类"><a href="#_4-4-1-jdbctoolsversion1类" class="header-anchor">#</a> 4.4.1 JDBCToolsVersion1类</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
这个工具类的作用就是用来给所有的SQL操作提供“连接”，和释放连接。
这里使用ThreadLocal的目的是为了让同一个线程，在多个地方getConnection得到的是同一个连接。
这里使用DataSource的目的是为了（1）限制服务器的连接的上限（2）连接的重用性等
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCTools</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Connection</span><span class="token punctuation">&gt;</span></span> tl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span><span class="token comment">//静态代码块，JDBCToolsVersion1类初始化执行</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
         <span class="token class-name">Connection</span> connection <span class="token operator">=</span> tl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>connection  <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//当前线程还没有拿过连接，就给它从数据库连接池拿一个</span>
             connection <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             tl<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> tl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            tl<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//避免还给数据库连接池的连接不是自动提交模式（建议）</span>
            connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_4-4-2-事务处理"><a href="#_4-4-2-事务处理" class="header-anchor">#</a> 4.4.2 事务处理</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateUtils2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">updateSQL</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> s <span class="token operator">=</span>connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;len = &quot;</span> <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//这里不关闭连接</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">//加上事务管理，或者说，手动提交事务模式</span>
        <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = 'xx' where did = 2&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = 'yy' what did = 3&quot;</span><span class="token punctuation">;</span><span class="token comment">//故意把where写错，写成what</span>
<span class="token comment">//        String sql2 = &quot;update t_department set description = 'yy' where did = 3&quot;;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">UpdateUtils2</span><span class="token punctuation">.</span><span class="token function">updateSQL</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">UpdateUtils2</span><span class="token punctuation">.</span><span class="token function">updateSQL</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//提交事务</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//回滚事务</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h1 id="第五章-封装dao层代码"><a href="#第五章-封装dao层代码" class="header-anchor">#</a> 第五章 封装DAO层代码</h1> <h2 id="_5-1-dao"><a href="#_5-1-dao" class="header-anchor">#</a> 5.1 DAO</h2> <p>Java是面向对象语言，数据在Java中通常以对象的形式存在。</p> <p>把数据库中的记录&lt;----&gt;Java的对象对应起来。</p> <p>我们把访问数据库的代码封装起来，这些类称为DAO（Data Access Object）。它相当于是一个数据访问接口，夹在业务逻辑与数据库资源中间。</p> <p><img src="/Java-Resource/assets/img/JavaEE项目的三层结构.8fe27078.png" alt="JavaEE项目的三层结构"></p> <h2 id="_5-2-反射封装basedaoimpl类"><a href="#_5-2-反射封装basedaoimpl类" class="header-anchor">#</a> 5.2 反射封装BaseDAOImpl类</h2> <p>基本上每一个数据表都应该有一个对应的DAO接口及其实现类，发现对所有表的操作（增、删、改、查）代码重复度很高，所以可以抽取公共代码，给这些DAO的实现类可以抽取一个公共的父类，我们称为BaseDAOImpl.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools<span class="token punctuation">.</span></span><span class="token class-name">JDBCTools</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSetMetaData</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDAO</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
    通用的增、删、改的方法
    String sql：sql
    Object... args：给sql中的?设置的值列表，可以是0~n
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
<span class="token comment">//        创建PreparedStatement对象，对sql预编译</span>
        <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置?的值</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>args <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> args<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?的编号从1开始，不是从0开始，数组的下标是从0开始</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//执行sql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//这里不关闭连接，连接的关闭统一交给事务管理的位置关闭</span>
        <span class="token keyword">return</span> len<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
    通用的查询多个Javabean对象的方法，例如：多个员工对象，多个部门对象等
    这里的clazz接收的是T类型的Class对象，
    如果查询员工信息，clazz代表Employee.class，
    如果查询部门信息，clazz代表Department.class，
     */</span>
    <span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//        创建PreparedStatement对象，对sql预编译</span>
        <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置?的值</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>args <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> args<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ps<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?的编号从1开始，不是从0开始，数组的下标是从0开始</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> res <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
        获取结果集的元数据对象。
        元数据对象中有该结果集一共有几列、列名称是什么等信息
         */</span>
         <span class="token class-name">ResultSetMetaData</span> metaData <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> columnCount <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取结果集列数</span>

        <span class="token comment">//遍历结果集ResultSet，把查询结果中的一条一条记录，变成一个一个T 对象，放到list中。</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//循环一次代表有一行，代表有一个T对象</span>
            <span class="token class-name">T</span> t <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//要求这个类型必须有公共的无参构造</span>

            <span class="token comment">//把这条记录的每一个单元格的值取出来，设置到t对象对应的属性中。</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>columnCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//for循环一次，代表取某一行的1个单元格的值</span>
                <span class="token class-name">Object</span> value <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">//这个值应该是t对象的某个属性值</span>
                <span class="token comment">//获取该属性对应的Field对象</span>
<span class="token comment">//                String columnName = metaData.getColumnName(i);//获取第i列的字段名</span>
                <span class="token class-name">String</span> columnName <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnLabel</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取第i列的字段名或字段的别名</span>
                <span class="token class-name">Field</span> field <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这么做可以操作private的属性</span>

                field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        res<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">queryBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>clazz<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_5-3-部门dao演示"><a href="#_5-3-部门dao演示" class="header-anchor">#</a> 5.3 部门DAO演示</h2> <h3 id="_1、部门类"><a href="#_1、部门类" class="header-anchor">#</a> 1、部门类</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> did<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> dname<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">,</span> <span class="token class-name">String</span> dname<span class="token punctuation">,</span> <span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dname <span class="token operator">=</span> dname<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDname</span><span class="token punctuation">(</span><span class="token class-name">String</span> dname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dname <span class="token operator">=</span> dname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Department{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;did=&quot;</span> <span class="token operator">+</span> did <span class="token operator">+</span>
                <span class="token string">&quot;, dname='&quot;</span> <span class="token operator">+</span> dname <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, description='&quot;</span> <span class="token operator">+</span> description <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_2、部门dao接口"><a href="#_2、部门dao接口" class="header-anchor">#</a> 2、部门DAO接口</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DepartmentDAO</span> <span class="token punctuation">{</span>
    <span class="token comment">//添加一个部门</span>
    <span class="token keyword">boolean</span> <span class="token function">addDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//根据主键did删除一个部门</span>
    <span class="token keyword">boolean</span> <span class="token function">removeByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//修改部分信息</span>
    <span class="token keyword">boolean</span> <span class="token function">updateDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//根据部门编号，查询一个部门对象</span>
    <span class="token class-name">Department</span> <span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//查询所有部门对象</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//其他方法略</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3、部门dao实现类"><a href="#_3、部门dao实现类" class="header-anchor">#</a> 3、部门DAO实现类</h3> <h4 id="sql"><a href="#sql" class="header-anchor">#</a> sql</h4> <div class="language-mysql extra-class"><pre class="language-text"><code>insert into t_department values(null,?,?);
select * from t_department;
update t_department set dname=?,description=? where did=?;
select * from t_department where did = ?;
delete from t_department where did = ?;
</code></pre></div><h4 id="部门dao实现类"><a href="#部门dao实现类" class="header-anchor">#</a> 部门DAO实现类</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DepartmentDAOImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDAO</span> <span class="token keyword">implements</span> <span class="token class-name">DepartmentDAO</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span><span class="token comment">//第一个null是因为部门表的第一个字段did是自增的</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_department where did = ?&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>did<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">updateDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_department set dname=? , description=? where did =?&quot;</span><span class="token punctuation">;</span><span class="token comment">//根据did可以定位到一条记录，主键</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_department&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">queryList</span><span class="token punctuation">(</span><span class="token class-name">Department</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Department</span> <span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span><span class="token string">&quot;select * from t_department where did =?&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">queryBean</span><span class="token punctuation">(</span><span class="token class-name">Department</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>did<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><h4 id="测试部门dao实现类"><a href="#测试部门dao实现类" class="header-anchor">#</a> 测试部门DAO实现类</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDepartmentDAO</span> <span class="token punctuation">{</span>
    <span class="token class-name">DepartmentDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Department</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token string">&quot;保安部&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;负责安保工作&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dao<span class="token punctuation">.</span><span class="token function">addDepartment</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Department</span> d <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dao<span class="token punctuation">.</span><span class="token function">updateDepartment</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        dao<span class="token punctuation">.</span><span class="token function">removeByDid</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        dao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_5-4-员工dao实现演示"><a href="#_5-4-员工dao实现演示" class="header-anchor">#</a> 5.4 员工DAO实现演示</h2> <h3 id="_1、员工类1-0版-有mysql-java类型问题"><a href="#_1、员工类1-0版-有mysql-java类型问题" class="header-anchor">#</a> 1、员工类1.0版（有mysql&lt;--&gt;Java类型问题）</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> eid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ename<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> commissionPct<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">char</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> workPlace<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> hiredate<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> jobId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> mid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> did<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getEid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>eid <span class="token operator">=</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEname</span><span class="token punctuation">(</span><span class="token class-name">String</span> ename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ename <span class="token operator">=</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token keyword">double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommissionPct</span><span class="token punctuation">(</span><span class="token keyword">double</span> commissionPct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>commissionPct <span class="token operator">=</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">Date</span> birthday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">char</span> <span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGender</span><span class="token punctuation">(</span><span class="token keyword">char</span> gender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTel</span><span class="token punctuation">(</span><span class="token class-name">String</span> tel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tel <span class="token operator">=</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWorkPlace</span><span class="token punctuation">(</span><span class="token class-name">String</span> workPlace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>workPlace <span class="token operator">=</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHiredate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> hiredate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hiredate <span class="token operator">=</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJobId</span><span class="token punctuation">(</span><span class="token keyword">int</span> jobId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>jobId <span class="token operator">=</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMid</span><span class="token punctuation">(</span><span class="token keyword">int</span> mid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mid <span class="token operator">=</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Employee{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;eid=&quot;</span> <span class="token operator">+</span> eid <span class="token operator">+</span>
                <span class="token string">&quot;, ename='&quot;</span> <span class="token operator">+</span> ename <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, salary=&quot;</span> <span class="token operator">+</span> salary <span class="token operator">+</span>
                <span class="token string">&quot;, commissionPct=&quot;</span> <span class="token operator">+</span> commissionPct <span class="token operator">+</span>
                <span class="token string">&quot;, birthday=&quot;</span> <span class="token operator">+</span> birthday <span class="token operator">+</span>
                <span class="token string">&quot;, gender=&quot;</span> <span class="token operator">+</span> gender <span class="token operator">+</span>
                <span class="token string">&quot;, tel='&quot;</span> <span class="token operator">+</span> tel <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, email='&quot;</span> <span class="token operator">+</span> email <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, address='&quot;</span> <span class="token operator">+</span> address <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, workPlace='&quot;</span> <span class="token operator">+</span> workPlace <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, hiredate=&quot;</span> <span class="token operator">+</span> hiredate <span class="token operator">+</span>
                <span class="token string">&quot;, jobId=&quot;</span> <span class="token operator">+</span> jobId <span class="token operator">+</span>
                <span class="token string">&quot;, mid=&quot;</span> <span class="token operator">+</span> mid <span class="token operator">+</span>
                <span class="token string">&quot;, did=&quot;</span> <span class="token operator">+</span> did <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_2、员工类2-0版"><a href="#_2、员工类2-0版" class="header-anchor">#</a> 2、员工类2.0版</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigDecimal</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> eid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ename<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> commissionPct<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> workPlace<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> hiredate<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> jobId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> mid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> did<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getEid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>eid <span class="token operator">=</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEname</span><span class="token punctuation">(</span><span class="token class-name">String</span> ename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ename <span class="token operator">=</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token class-name">Double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommissionPct</span><span class="token punctuation">(</span><span class="token class-name">BigDecimal</span> commissionPct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>commissionPct <span class="token operator">=</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">Date</span> birthday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGender</span><span class="token punctuation">(</span><span class="token class-name">String</span> gender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTel</span><span class="token punctuation">(</span><span class="token class-name">String</span> tel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tel <span class="token operator">=</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWorkPlace</span><span class="token punctuation">(</span><span class="token class-name">String</span> workPlace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>workPlace <span class="token operator">=</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHiredate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> hiredate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hiredate <span class="token operator">=</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJobId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> jobId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>jobId <span class="token operator">=</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> mid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mid <span class="token operator">=</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Employee{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;eid=&quot;</span> <span class="token operator">+</span> eid <span class="token operator">+</span>
                <span class="token string">&quot;, ename='&quot;</span> <span class="token operator">+</span> ename <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, salary=&quot;</span> <span class="token operator">+</span> salary <span class="token operator">+</span>
                <span class="token string">&quot;, commissionPct=&quot;</span> <span class="token operator">+</span> commissionPct <span class="token operator">+</span>
                <span class="token string">&quot;, birthday=&quot;</span> <span class="token operator">+</span> birthday <span class="token operator">+</span>
                <span class="token string">&quot;, gender=&quot;</span> <span class="token operator">+</span> gender <span class="token operator">+</span>
                <span class="token string">&quot;, tel='&quot;</span> <span class="token operator">+</span> tel <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, email='&quot;</span> <span class="token operator">+</span> email <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, address='&quot;</span> <span class="token operator">+</span> address <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, workPlace='&quot;</span> <span class="token operator">+</span> workPlace <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, hiredate=&quot;</span> <span class="token operator">+</span> hiredate <span class="token operator">+</span>
                <span class="token string">&quot;, jobId=&quot;</span> <span class="token operator">+</span> jobId <span class="token operator">+</span>
                <span class="token string">&quot;, mid=&quot;</span> <span class="token operator">+</span> mid <span class="token operator">+</span>
                <span class="token string">&quot;, did=&quot;</span> <span class="token operator">+</span> did <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_3、员工dao接口"><a href="#_3、员工dao接口" class="header-anchor">#</a> 3、员工DAO接口</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeDAO</span> <span class="token punctuation">{</span>
    <span class="token comment">//添加一个员工</span>
    <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//根据员工编号查询一个员工对象</span>
    <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//根据员工编号删除一个员工对象，即删除一条记录</span>
    <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//查询所有的员工对象</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//其他方法略</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4、员工dao实现类"><a href="#_4、员工dao实现类" class="header-anchor">#</a> 4、员工DAO实现类</h3> <h4 id="sql-2"><a href="#sql-2" class="header-anchor">#</a> sql</h4> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO t_employee(`eid`,`ename`,`salary`,`commission_pct`,`birthday`,`gender`,`tel`,`email`,`address`,`work_place`,`hiredate`,`job_id`,`mid`,`did`)VALUES(NULL,?,?,?,?,?,?,?,?,?,?,?,?,?);

delete from t_employee where eid = ?;

update t_employee set `ename`=?,`salary`=?,`commission_pct`=?,`birthday`=?,`gender`=?,`tel`=?,`email`=?,`address`=?,`work_place`=?,`hiredate`=?,`job_id`=?,`mid`=?,`did`=? where `eid`=?;

SELECT * FROM t_employee;

SELECT `eid`,`ename`,`salary`,`commission_pct` AS commissionPct,`birthday`,`gender`,`tel`,`email`,`address`,`work_place` AS workPlace,`hiredate`,`job_id` AS jobId,`mid`,`did` FROM t_employee;


SELECT `eid`,`ename`,`salary`,`commission_pct` AS commissionPct,`birthday`,`gender`,`tel`,`email`,`address`,`work_place` AS workPlace,`hiredate`,`job_id` AS jobId,`mid`,`did` FROM t_employee where eid=?
</code></pre></div><h4 id="员工dao实现类"><a href="#员工dao实现类" class="header-anchor">#</a> 员工DAO实现类</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeDAOImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDAO</span> <span class="token keyword">implements</span> <span class="token class-name">EmployeeDAO</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_employee(`eid`,`ename`,`salary`,`commission_pct`,`birthday`,&quot;</span> <span class="token operator">+</span>
                    <span class="token string">&quot;`gender`,`tel`,`email`,`address`,`work_place`,`hiredate`,`job_id`,`mid`,`did`)&quot;</span> <span class="token operator">+</span>
                    <span class="token string">&quot;values(null,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span><span class="token comment">//null表示eid是自增的</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>employee<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_employee where eid = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>eid<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">updateEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_employee set `ename`=?,`salary`=?,`commission_pct`=?,`birthday`=?,`gender`=?,`tel`=?,`email`=?,`address`=?,`work_place`=?,`hiredate`=?,`job_id`=?,`mid`=?,`did`=? where `eid`=?&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>employee<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    employee<span class="token punctuation">.</span><span class="token function">getEid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//        String sql = &quot;select * from t_employee where eid = ?&quot;;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT `eid`,`ename`,`salary`,`commission_pct` AS commissionPct,`birthday`,`gender`,`tel`,`email`,`address`,`work_place` AS workPlace,`hiredate`,`job_id` AS jobId,`mid`,`did` FROM t_employee where eid = ?&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">queryBean</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//        String sql = &quot;select * from t_employee&quot;;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT `eid`,`ename`,`salary`,`commission_pct` AS commissionPct,`birthday`,`gender`,`tel`,`email`,`address`,`work_place` AS workPlace,`hiredate`,`job_id` AS jobId,`mid`,`did` FROM t_employee&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">queryList</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="测试员工dao实现类"><a href="#测试员工dao实现类" class="header-anchor">#</a> 测试员工DAO实现类</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEmployeeDAO</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//先测试查询所有员工对象</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        all<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        （1）java.lang.RuntimeException: java.lang.NoSuchFieldException: commission_pct
            原因：mysql的atguigu库，t_employee表中 奖金比例字段名是  commission_pct
        而Javabean Employee类中奖金比例是commissionPct
        如何解决？
        编写特殊的sql，在select语句中给表的字段取别名，
            select commission_pct as commissionPct

        公共的查询方法getList和getBean方法中，反射获取Field对象是根据ResultSet结果集中的表头来确定属性名。
        String columnName = metaData.getColumnName(i);
        换成
        String columnName = metaData.getColumnLabel(i);

        （2）java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set double field com.atguigu.bean.Employee.commissionPct to java.math.BigDecimal。
        原因：mysql的atguigu库，t_employee表中 奖金比例字段数据类型是decimal，对应Java的java.math.BigDecimal，不是double。

        （3）java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set char field com.atguigu.bean.Employee.gender to java.lang.String
        原因：mysql的atguigu库，t_employee表中 gender是enum('男','女')，对应Java的String类型
        其实就算是  t_employee表中 gender是char类型，也是对应Java的String类型，因为mysql的char可以存储多个字符char(M)，必须用String类型

        （4）java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set int field com.atguigu.bean.Employee.jobId to null value
        原因：mysql的atguigu库，t_employee表中 job_id是int类型，但是mysql中的int类型可以设置NULL中，
        而Java中的int类型是不能设置为null，所以的mysql中的int要用Java的Integer对应

        类似的还有：double等
         */</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//测试查询一个员工的方法</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入要查询的员工的编号：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> eid <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Employee</span> employee <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByEid</span><span class="token punctuation">(</span>eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//测试删除一个员工的方法</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入要删除的员工的编号：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> eid <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">removeEmployee</span><span class="token punctuation">(</span>eid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//测试添加员工方法</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入姓名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//李四</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入薪资：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入出生日期：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>
        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入性别：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        char gender = input.next().charAt(0);//男</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入手机号码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;请输入邮箱：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sf.parse(birthday)把字符串的日期转为Date类型的日期</span>
        <span class="token class-name">Employee</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setEname</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleDateFormat</span> sm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span>sm<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setTel</span><span class="token punctuation">(</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setWorkPlace</span><span class="token punctuation">(</span><span class="token string">&quot;北京&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setHiredate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Employee</span> emp <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        emp<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token number">20000.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dao<span class="token punctuation">.</span><span class="token function">updateEmployee</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><h1 id="第六章-apache的dbutils"><a href="#第六章-apache的dbutils" class="header-anchor">#</a> 第六章 Apache的Dbutils</h1> <h2 id="_6-1-apache的commons-dbutils"><a href="#_6-1-apache的commons-dbutils" class="header-anchor">#</a> 6.1 Apache的commons-dbutils</h2> <p>commons-dbutils 是 Apache 组织提供的一个开源 JDBC工具类库，它是对JDBC的简单封装，学习成本极低，并且使用dbutils能极大简化jdbc编码的工作量，同时也不会影响程序的性能。</p> <p>其中QueryRunner类封装了SQL的执行，是线程安全的。</p> <p>（1）可以实现增、删、改、查、批处理、</p> <p>（2）考虑了事务处理需要共用Connection。</p> <p>（3）该类最主要的就是简单化了SQL查询，它与ResultSetHandler组合在一起使用可以完成大部分的数据库操作，能够大大减少编码量。</p> <p>（4）不需要手动关闭连接，runner会自动关闭连接，释放到连接池中</p> <p><strong>（1）更新</strong></p> <p>public int update(Connection conn, String sql, Object... params) throws SQLException:用来执行一个更新（插入、更新或删除）操作。</p> <p>......</p> <p><strong>（2）插入</strong></p> <p>public &lt;T&gt; T insert(Connection conn,String sql,ResultSetHandler&lt;T&gt; rsh, Object... params) throws SQLException：只支持INSERT语句，其中 rsh - The handler used to create the result object from the ResultSet of auto-generated keys.  返回值: An object generated by the handler.即自动生成的键值</p> <p>....</p> <p><strong>（3）批处理</strong></p> <p>public int[] batch(Connection conn,String sql,Object[][] params)throws SQLException： INSERT, UPDATE, or DELETE语句</p> <p>public &lt;T&gt; T insertBatch(Connection conn,String sql,ResultSetHandler&lt;T&gt; rsh,Object[][] params)throws SQLException：只支持INSERT语句</p> <p>.....</p> <p><strong>（4）使用QueryRunner类实现查询</strong></p> <p>public Object query(Connection conn, String sql, ResultSetHandler rsh,Object... params) throws SQLException：执行一个查询操作，在这个查询中，对象数组中的每个元素值被用来作为查询语句的置换参数。该方法会自行处理 PreparedStatement 和 ResultSet 的创建和关闭。</p> <p>....</p> <p>ResultSetHandler接口用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式。ResultSetHandler 接口提供了一个单独的方法：Object handle (java.sql.ResultSet  rs)该方法的返回值将作为QueryRunner类的query()方法的返回值。</p> <p>该接口有如下实现类可以使用：</p> <ul><li>BeanHandler：将结果集中的第一行数据封装到一个对应的JavaBean实例中。</li> <li>BeanListHandler：将结果集中的每一行数据都封装到一个对应的JavaBean实例中，存放到List里。</li> <li>ScalarHandler：查询单个值对象</li> <li>MapHandler：将结果集中的第一行数据封装到一个Map里，key是列名，value就是对应的值。</li> <li>MapListHandler：将结果集中的每一行数据都封装到一个Map里，然后再存放到List</li> <li>ColumnListHandler：将结果集中某一列的数据存放到List中。</li> <li>KeyedHandler(name)：将结果集中的每一行数据都封装到一个Map里，再把这些map再存到一个map里，其key为指定的key。</li> <li>ArrayHandler：把结果集中的第一行数据转成对象数组。</li> <li>ArrayListHandler：把结果集中的每一行数据都转成一个数组，再存放到List中。</li></ul> <h2 id="_6-2-使用dbutils组件封装basedaoimpl"><a href="#_6-2-使用dbutils组件封装basedaoimpl" class="header-anchor">#</a> 6.2 使用Dbutils组件封装BaseDAOImpl</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>apache</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools<span class="token punctuation">.</span></span><span class="token class-name">JDBCTools</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span></span><span class="token class-name">QueryRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">BeanHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">BeanListHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">MapListHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">ScalarHandler</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApacheBaseDAO</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryList</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">queryBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BeanHandler</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">getValue</span><span class="token punctuation">(</span> <span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">ScalarHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">MapListHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_6-3-员工dao演示"><a href="#_6-3-员工dao演示" class="header-anchor">#</a> 6.3 员工DAO演示</h2> <h3 id="_6-3-1-员工dao接口2"><a href="#_6-3-1-员工dao接口2" class="header-anchor">#</a> 6.3.1 员工DAO接口2</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>apache</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeDAO2</span> <span class="token punctuation">{</span>
    <span class="token comment">//添加一个员工</span>
    <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//根据员工编号删除一个员工对象，即删除一条记录</span>
    <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//修改员工信息</span>
    <span class="token keyword">boolean</span> <span class="token function">updateEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//根据员工编号查询一个员工对象</span>
    <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//查询所有的员工对象</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">deleteByEname</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getEmpBySalaryScope</span><span class="token punctuation">(</span><span class="token keyword">double</span> lowSalary<span class="token punctuation">,</span> <span class="token keyword">double</span> highSalary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查询员工的数量</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAvgSalaryGroupByDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_6-3-2-员工dao接口实现类"><a href="#_6-3-2-员工dao接口实现类" class="header-anchor">#</a> 6.3.2 员工DAO接口实现类</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>apache</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeDAOImpl2</span> <span class="token keyword">extends</span> <span class="token class-name">ApacheBaseDAO</span> <span class="token keyword">implements</span> <span class="token class-name">EmployeeDAO2</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(eid,ename,salary,commission_pct,birthday,gender,tel,email,address,work_place,hiredate,job_id,mid,did)VALUES(null,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">updateEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_employee set ename=?, salary=?,commission_pct=?,birthday=?,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;gender=?,tel=?,email=?,address=?,work_place=?,hiredate=?,job_id=?,mid=?,did=? where eid=?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    e<span class="token punctuation">.</span><span class="token function">getEid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_employee where eid=?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> eid<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">deleteByEname</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_employee where ename=?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select eid,ename,salary,commission_pct as commissionPct,birthday,gender,tel,email,address,work_place as workPlace,hiredate,job_id as jobId,mid,did from t_employee&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">queryList</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select eid,ename,salary,commission_pct as commissionPct,birthday,gender,tel,email,address,work_place as workPlace,hiredate,job_id as jobId,mid,did from t_employee where eid = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">queryBean</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getEmpBySalaryScope</span><span class="token punctuation">(</span><span class="token keyword">double</span> lowSalary<span class="token punctuation">,</span> <span class="token keyword">double</span> highSalary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select eid,ename,salary,commission_pct as commissionPct,birthday,gender,tel,email,address,work_place as workPlace,hiredate,job_id as jobId,mid,did from t_employee &quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;where salary between ? and ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">queryList</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> sql<span class="token punctuation">,</span> lowSalary<span class="token punctuation">,</span> highSalary<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select count(*) from t_employee&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token function">getValue</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAvgSalaryGroupByDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select did,avg(salary) from t_employee group by did&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token function">getMap</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> stringObjectMap <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Object</span> key <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> stringObjectMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;did&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Object</span> value <span class="token operator">=</span> stringObjectMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;avg(salary)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>


        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_6-3-3-测试员工dao实现类"><a href="#_6-3-3-测试员工dao实现类" class="header-anchor">#</a> 6.3.3 测试员工DAO实现类</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>apache</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEmployeeDAO2</span> <span class="token punctuation">{</span>
    <span class="token class-name">EmployeeDAOImpl2</span> dao2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        dao2<span class="token punctuation">.</span><span class="token function">deleteByEname</span><span class="token punctuation">(</span><span class="token string">&quot;李冰冰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//查询10000-20000之间</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> dao2<span class="token punctuation">.</span><span class="token function">getEmpBySalaryScope</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao2<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> dao2<span class="token punctuation">.</span><span class="token function">getAvgSalaryGroupByDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h1 id="补充学生问题-jar包版本不兼容"><a href="#补充学生问题-jar包版本不兼容" class="header-anchor">#</a> 补充学生问题： jar包版本不兼容</h1> <p>使用低版本jar，例如：mysql-connector-java-8.0.19.jar</p> <div class="language- extra-class"><pre class="language-text"><code>Exception in thread &quot;main&quot; com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:408)
	at com.mysql.jdbc.Util.getInstance(Util.java:383)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1023)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:997)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:983)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:928)
	at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2576)
	at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2309)
	at com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:834)
	at com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:46)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:408)
	at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:419)
	at com.mysql.jdbc.NonRegisteringDriver.connect(Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
Exception in thread &quot;main&quot; java.sql.SQLException: The server time zone value '�й���׼ʱ��' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:76)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:835)
	at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:455)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:240)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:199)
	at java.sql.DriverManager.getConnection(DriverManager.java:664)
	at java.sql.DriverManager.getConnection(DriverManager.java:247)
.java:344)
	at java.sql.DriverManager.getConnection(DriverManager.java:664)
	at java.sql.DriverManager.getConnection(DriverManager.java:247)
</code></pre></div><p>看异常好像是无事务连接异常，无法创建连接。将MySQL驱动改为了最新的8.0版本的MySQL驱动。显示那个驱动类已经过时了，新的驱动类是“com.mysql.cj.jdbc.Driver”，而不是“com.mysql.jdbc.Driver”了，并且还说我没有配置时区，查了一下，原来从JDBC6.0开始驱动类使用了新的，并且url中必须要设置时区，否侧会报错。</p> <div class="language- extra-class"><pre class="language-text"><code>如果继续使用旧版jar包，注意驱动类名改为:com.mysql.cj.jdbc.Driver
url后加入时区设置：jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF8&amp;serverTimezone=UTC
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/Java-Resource/MySQL/尚硅谷_柴林燕_MySQL8.0_SQL笔记.html" class="prev">
          SQL笔记
        </a></span> <span class="next"><a href="/Java-Resource/JavaEE/day01_jdbc.html">
          JDBC的介绍
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:0;" data-v-b57cc07c data-v-7dd95ae2></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/Java-Resource/assets/js/app.3e355afd.js" defer></script><script src="/Java-Resource/assets/js/7.732492af.js" defer></script><script src="/Java-Resource/assets/js/1.35f7ce2e.js" defer></script><script src="/Java-Resource/assets/js/18.fc5da0bb.js" defer></script>
  </body>
</html>
