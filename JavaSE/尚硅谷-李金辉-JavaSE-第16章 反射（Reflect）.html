<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第16章 反射（Reflect）与注解（Annotation） | Java学习资料</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="JavaSE,MySQL,Spring,MyBatis">
    
    <link rel="preload" href="/Java-Resource/assets/css/0.styles.d6af471c.css" as="style"><link rel="preload" href="/Java-Resource/assets/js/app.3e355afd.js" as="script"><link rel="preload" href="/Java-Resource/assets/js/7.732492af.js" as="script"><link rel="preload" href="/Java-Resource/assets/js/1.35f7ce2e.js" as="script"><link rel="preload" href="/Java-Resource/assets/js/33.717186b7.js" as="script"><link rel="prefetch" href="/Java-Resource/assets/js/10.c088622a.js"><link rel="prefetch" href="/Java-Resource/assets/js/11.38c9bb61.js"><link rel="prefetch" href="/Java-Resource/assets/js/12.efda74de.js"><link rel="prefetch" href="/Java-Resource/assets/js/13.8eda7c5f.js"><link rel="prefetch" href="/Java-Resource/assets/js/14.35682402.js"><link rel="prefetch" href="/Java-Resource/assets/js/15.20bc2c9b.js"><link rel="prefetch" href="/Java-Resource/assets/js/16.2abb7387.js"><link rel="prefetch" href="/Java-Resource/assets/js/17.23ba30ae.js"><link rel="prefetch" href="/Java-Resource/assets/js/18.fc5da0bb.js"><link rel="prefetch" href="/Java-Resource/assets/js/19.75a51867.js"><link rel="prefetch" href="/Java-Resource/assets/js/20.900f70ff.js"><link rel="prefetch" href="/Java-Resource/assets/js/21.55fafedd.js"><link rel="prefetch" href="/Java-Resource/assets/js/22.7375487f.js"><link rel="prefetch" href="/Java-Resource/assets/js/23.cd1de481.js"><link rel="prefetch" href="/Java-Resource/assets/js/24.45ef11cf.js"><link rel="prefetch" href="/Java-Resource/assets/js/25.13052779.js"><link rel="prefetch" href="/Java-Resource/assets/js/26.64d4f060.js"><link rel="prefetch" href="/Java-Resource/assets/js/27.dd2bc265.js"><link rel="prefetch" href="/Java-Resource/assets/js/28.22702d87.js"><link rel="prefetch" href="/Java-Resource/assets/js/29.a6fa4ca7.js"><link rel="prefetch" href="/Java-Resource/assets/js/3.6d32b58d.js"><link rel="prefetch" href="/Java-Resource/assets/js/30.5f50badb.js"><link rel="prefetch" href="/Java-Resource/assets/js/31.d0a81190.js"><link rel="prefetch" href="/Java-Resource/assets/js/32.41e095b0.js"><link rel="prefetch" href="/Java-Resource/assets/js/34.2d02ee4b.js"><link rel="prefetch" href="/Java-Resource/assets/js/35.7bf70bfa.js"><link rel="prefetch" href="/Java-Resource/assets/js/36.a8e919e7.js"><link rel="prefetch" href="/Java-Resource/assets/js/37.019374ff.js"><link rel="prefetch" href="/Java-Resource/assets/js/38.4314055a.js"><link rel="prefetch" href="/Java-Resource/assets/js/39.4993a3b7.js"><link rel="prefetch" href="/Java-Resource/assets/js/4.d71962df.js"><link rel="prefetch" href="/Java-Resource/assets/js/40.631f09e1.js"><link rel="prefetch" href="/Java-Resource/assets/js/41.8bb881f4.js"><link rel="prefetch" href="/Java-Resource/assets/js/42.d65debda.js"><link rel="prefetch" href="/Java-Resource/assets/js/5.d38c8a38.js"><link rel="prefetch" href="/Java-Resource/assets/js/6.9f77652f.js"><link rel="prefetch" href="/Java-Resource/assets/js/8.93b3c9de.js"><link rel="prefetch" href="/Java-Resource/assets/js/9.bbcc58a7.js">
    <link rel="stylesheet" href="/Java-Resource/assets/css/0.styles.d6af471c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Java学习资料</h3> <p class="description" data-v-59e6cb88>JavaSE,MySQL,Spring,MyBatis</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Java-Resource/" class="home-link router-link-active"><!----> <span class="site-name">Java学习资料</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Java-Resource/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      simonf 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://simonf.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/Java-Resource/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      simonf 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://simonf.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/Java-Resource/JavaSE/安装笔记" class="sidebar-heading clickable open"><span>JavaSE</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java-Resource/JavaSE/安装笔记.html" class="sidebar-link">安装笔记</a></li><li><a href="/Java-Resource/JavaSE/JDK的下载、安装与配置.html" class="sidebar-link">JDK的下载、安装与配置</a></li><li><a href="/Java-Resource/JavaSE/Java程序编译运行常见问题.html" class="sidebar-link">Java程序编译运行常见问题</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第1章 Java概述.html" class="sidebar-link">Java概述</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第2章 Java基础语法.html" class="sidebar-link">Java基础语法</a></li><li><a href="/Java-Resource/JavaSE/流程控制.html" class="sidebar-link">流程控制</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_第四章 数组.html" class="sidebar-link">数组</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_第五章 方法.html" class="sidebar-link">方法</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第6章 面向对象基础（上）.html" class="sidebar-link">面向对象基础（上）</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第7章 面向对象基础（中）.html" class="sidebar-link">面向对象基础（中）</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第8章 面向对象基础（下）.html" class="sidebar-link">面向对象基础（下）</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第8章 异常.html" class="sidebar-link">异常</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第11章 集合.html" class="sidebar-link">集合</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第12章 泛型.html" class="sidebar-link">泛型</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第13章 File类与IO流.html" class="sidebar-link">File类与IO流</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷_李金辉_JavaSE_第14章 多线程.html" class="sidebar-link">多线程</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷-李金辉-JavaSE-第15章 网络编程.html" class="sidebar-link">网络编程</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷-李金辉-JavaSE-第16章 反射（Reflect）.html" class="active sidebar-link">反射</a></li><li><a href="/Java-Resource/JavaSE/类的加载器.html" class="sidebar-link">类的加载器</a></li><li><a href="/Java-Resource/JavaSE/尚硅谷-李金辉-JavaSE-第17章 JDK新特性.html" class="sidebar-link">JDK新特性</a></li><li><a href="/Java-Resource/JavaSE/JavaSE复习笔记.html" class="sidebar-link">JavaSE复习</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Java-Resource/MySQL/尚硅谷_柴林燕_MySQL8_可视化工具Navicat的使用" class="sidebar-heading clickable"><span>MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Java-Resource/JavaEE/day01_jdbc" class="sidebar-heading clickable"><span>JavaEE</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">第16章 反射（Reflect）与注解（Annotation）</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="第16章-反射-reflect-与注解-annotation"><a href="#第16章-反射-reflect-与注解-annotation" class="header-anchor">#</a> 第16章 反射（Reflect）与注解（Annotation）</h1> <h2 id="教学目标"><a href="#教学目标" class="header-anchor">#</a> 教学目标</h2> <ul><li>[ ] 了解类的加载过程</li> <li>[ ] 理解类初始化过程</li> <li>[ ] 了解类加载器</li> <li>[ ] 掌握获取Class对象的四种方式</li> <li>[ ] 能够运用反射获取类型的详细信息</li> <li>[ ] 能够运用反射动态创建对象</li> <li>[ ] 能够运用反射动态获取成员变量并使用</li> <li>[ ] 能够运用反射动态获取成员方法并使用</li> <li>[ ] 能够运用反射读取注解</li> <li>[ ] 能够运用反射获取泛型父类的类型参数</li></ul> <h1 id="第16章-反射-reflect"><a href="#第16章-反射-reflect" class="header-anchor">#</a> 第16章 反射（Reflect）</h1> <h2 id="_16-1-类加载"><a href="#_16-1-类加载" class="header-anchor">#</a> 16.1 类加载</h2> <p>类在内存中的生命周期：加载--&gt;使用--&gt;卸载</p> <h3 id="_16-1-1-类的加载过程"><a href="#_16-1-1-类的加载过程" class="header-anchor">#</a> 16.1.1 类的加载过程</h3> <p>当程序主动使用某个类时，如果该类还未被加载到内存中，系统会通过加载、链接、初始化三个步骤来对该类进行初始化，如果没有意外，JVM将会连续完成这三个步骤，所以有时也把这三个步骤统称为类加载。</p> <p>类的加载又分为三个阶段：</p> <p><strong>（1）加载：load</strong></p> <ul><li>就是指将类型的class字节码数据读入内存</li></ul> <p><strong>（2）链接：link</strong></p> <ul><li><p>①验证：校验被加载的class文件的合法性，并且不会危害虚拟机的自身安全（文件格式验证，语义分析等）</p></li> <li><p>②准备：为类变量分配内存（在方法区中）并设置初始值（0,null,false），为静态常量赋初始值（常量池中）</p> <p><em>比如：public static int sector = 3;类变量在此阶段会被设置默认初始值为0，而不是3.</em></p> <p><em>public static final int number = 3;静态常量在此阶段会被设置值为3</em></p></li> <li><p>③解析：把字节码中的符号引用替换为对应的直接地址引用</p> <p><em>符号引用就是一组符号来描述目标，可以是任何字面量。</em></p> <p><em>直接引用就是直接指向目标的指针、相对偏移量或一个间接定位到目标的句柄</em>。</p></li></ul> <p><strong>（3）初始化：initialize</strong></p> <ul><li><p>为类的静态变量赋予正确的初始值，JVM负责对类进行初始化，主要对类变量进行初始化。</p> <p><em>类初始化执行的是<code>&lt;clinit&gt;()</code>，该方法会执行①类变量的显式赋值代码②静态代码块中的代码，用于给类变量初始化值。</em></p></li></ul> <p><img src="/Java-Resource/assets/img/1560767438339.a66d9dfc.png" alt="1560767438339"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> c<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1--&gt;&quot;</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2--&gt;&quot;</span><span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3--&gt;&quot;</span><span class="token operator">+</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;4--&gt;&quot;</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;5--&gt;&quot;</span><span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;6--&gt;&quot;</span><span class="token operator">+</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;7--&gt;&quot;</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;8--&gt;&quot;</span><span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;9--&gt;&quot;</span><span class="token operator">+</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-1-2-类初始化"><a href="#_16-1-2-类初始化" class="header-anchor">#</a> 16.1.2 类初始化</h3> <p><strong>1、哪些操作会导致类的初始化？</strong></p> <p>（1）运行主方法所在的类，要先完成类初始化，再执行main方法</p> <p>（2）第一次使用某个类型就是在new它的对象，此时这个类没有初始化的话，先完成类初始化再做实例初始化</p> <p>（3）调用某个类的静态成员（类变量和类方法），此时这个类没有初始化的话，先完成类初始化</p> <p>（4）子类初始化时，发现它的父类还没有初始化的话，那么先初始化父类</p> <p>（5）通过反射操作某个类时，如果这个类没有初始化，也会导致该类先初始化</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main方法所在的类的父类(1)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//初始化子类时，会初始化父类</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestClinit1</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main方法所在的类(2)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//主方法所在的类会初始化</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>
		<span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第一次使用A就是创建它的对象，会初始化A类</span>
		
		<span class="token class-name">B</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//直接使用B类的静态成员会初始化B类</span>
		
		<span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.atguigu.test02.C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//通过反射操作C类，会初始化C类</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;A类初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;B类初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;B类的静态方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;C类初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>2、哪些使用类的操作，但是不会导致类的初始化？</strong></p> <p>（1）使用某个类的静态的常量（static  final）</p> <p>（2）通过子类调用父类的静态变量，静态方法，只会导致父类初始化，不会导致子类初始化，即只有声明静态成员的类才会初始化</p> <p>（3）用某个类型声明数组并创建数组对象时，不会导致这个类初始化</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestClinit2</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token constant">NUM</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//D类不会初始化，因为NUM是final的</span>
		
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">F</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">F</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F类不会初始化，E类会初始化，因为num和test()是在E类中声明的</span>
		
		<span class="token comment">//G类不会初始化，此时还没有正式用的G类</span>
		<span class="token class-name">G</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">G</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//没有创建G的对象，创建的是准备用来装G对象的数组对象</span>
        <span class="token comment">//G[]是一种新的类型，是数组类型，动态编译生成的一种新的类型</span>
        <span class="token comment">//G[].class</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">NUM</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;D类的初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">E</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;E父类的初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;父类的静态方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">F</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;F子类的初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">G</span><span class="token punctuation">{</span>
	<span class="token keyword">static</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;G类的初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-1-3-类加载器"><a href="#_16-1-3-类加载器" class="header-anchor">#</a> 16.1.3 类加载器</h3> <p>Java类如何加载到内存中？类的加载通过类加载器完成。JVM启动会先创建类加载器ClassLoader对象用来加载Java类。</p> <p><strong>1、类加载器分为：</strong></p> <p>（1）引导类加载器（Bootstrap ClassLoader）又称为根类加载器</p> <div class="language- extra-class"><pre class="language-text"><code>它负责加载jre/lib/rt.jar核心库
它本身不是Java代码实现的（HotSpot VM 中C++实现的），也不是ClassLoader的子类，获取它的对象时往往返回null
</code></pre></div><p>（2）扩展类加载器（Extension ClassLoader,JDK9开始改为平台类加载器）</p> <div class="language- extra-class"><pre><code>它负责加载jre/lib/ext扩展库
它是ClassLoader的子类
Java代码编写
</code></pre></div><p>（3）应用程序类加载器（Application ClassLoader）</p> <div class="language- extra-class"><pre><code>也称为系统类加载器System Class Loader
它负责加载项目的classpath路径下的类
它是ClassLoader的子类
Java代码编写
</code></pre></div><p>（4）自定义类加载器</p> <div class="language- extra-class"><pre><code>当你的程序需要加载“特定”目录下的类，可以自定义类加载器，必须继承自java.lang.ClassLoader类
当你的程序的字节码文件需要加密时，那么往往会提供一个自定义类加载器对其进行解码
tomcat服务器中会应用到
Java编写
</code></pre></div><p><strong>2、Java系统类加载器的双亲委托模式</strong></p> <ol><li><p>在JVM虚拟机中，当使用到一个类时，这个类本应该直接由对应的类加载器加载它，但是对应的类加载器收到这个类加载的请求时，这个类加载器却首先不会自己去尝试加载这个类，而是把这个请求委派给父类加载器完成。每个类加载器都是如此，只有当父加载器在自己的搜索范围内找不到指定的类时，子加载器才会尝试自己去加载，自己也加载不了那么会抛异常（即ClassNotFoundException）。</p></li> <li><p>也就是说，对于每个类加载器，只有父类（依次递归）找不到时，才自己加载 。这就是<strong>双亲委派模式</strong></p></li></ol> <img src=" imgs\双亲委派" alt="preview" style="zoom:80%;"> <p><strong>为什么需要双亲委派模型呢？</strong></p> <p>①这样可以避免重复加载</p> <p>​	前面已经说明，当一个类要加载时先看父级类加载器是否加载，如果已经加载过，则无需再重复加载。</p> <p>②考虑到安全因素</p> <p>​	假设我们使用一个第三方Jar包，该Jar包中自定义了一个java.lang.String类，它的功能和系统String类的功能相同，但是加入了恶意代码。那么，JVM会加载这个自定义的String类，从而在我们所有用到String类的地方都会执行该恶意代码。如果有双亲委派模型，自定义的String类是不会被加载的，因为最顶层的类加载器会首先加载系统的java.lang.String类，而不会加载自定义的String类，防止了恶意代码的注入。</p> <p><strong>3、获取类加载器的方式：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//通过类的Class实例获取加载此类的加载器</span>
<span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">Demo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过线程获取当前线程上下文类加载器</span>
<span class="token class-name">ClassLoader</span> contextClassLoader <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过ClassLoader静态方法获取系统类加载器</span>
<span class="token class-name">ClassLoader</span> systemClassLoader <span class="token operator">=</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>示例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果：</p> <div class="language- extra-class"><pre class="language-text"><code>sun.misc.Launcher$AppClassLoader@18b4aac2
sun.misc.Launcher$ExtClassLoader@4554617c
null
</code></pre></div><h2 id="_16-2-java-lang-class类"><a href="#_16-2-java-lang-class类" class="header-anchor">#</a> 16.2  java.lang.Class类</h2> <p>万物皆对象，每个类编译后生成的字节码文件，即class文件，在类加载后JVM会为每个class文件创建一个对象，也就是Class类的一个对象。这个Class对象封装了类在方法区内的数据信息，并且向Java程序员提供了访问方法区内的类数据信息的接口。</p> <p><strong>Java反射机制</strong>是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为Java语言的反射机制。</p> <p>要想解剖一个类，必须先要获取到该类的Class对象。所以，<strong>Class对象是反射的根源。</strong></p> <p><strong>获取Class对象的四种方式</strong></p> <ol><li><p>类型名.class</p> <p>要求编译期间已知类型，所有的Java类型都可通过此方式获取Class对象</p></li> <li><p>对象.getClass()</p> <p>获取对象的运行时类型</p></li> <li><p>Class.forName(类型全名称)</p> <p>可以获取编译期间未知的类型</p></li> <li><p>ClassLoader的类加载器对象.loadClass(类型全名称)</p> <p>可以用系统类加载对象或自定义加载器对象加载指定路径下的类型</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestClass</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
		<span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">TestClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
		<span class="token class-name">ClassLoader</span> loader <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">Class</span> c2 <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token string">&quot;com.atguigu.test05.Employee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Class</span> c3 <span class="token operator">=</span> <span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c2 <span class="token operator">==</span> c3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
		<span class="token class-name">Class</span> c2 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
		<span class="token class-name">Class</span> c1 <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Class</span> c3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1 <span class="token operator">==</span> c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1 <span class="token operator">==</span> c3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_16-3-反射的应用"><a href="#_16-3-反射的应用" class="header-anchor">#</a> 16.3 反射的应用</h2> <h3 id="_16-3-1-获取类型的详细信息"><a href="#_16-3-1-获取类型的详细信息" class="header-anchor">#</a> 16.3.1 获取类型的详细信息</h3> <p>可以获取：包、修饰符、类型名、父类（包括泛型父类）、父接口（包括泛型父接口）、成员（属性、构造器、方法）、注解（类上的、方法上的、属性上的）</p> <p>示例代码获取常规信息：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestClassInfo</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchFieldException</span><span class="token punctuation">,</span> <span class="token class-name">SecurityException</span> <span class="token punctuation">{</span>
		<span class="token comment">//1、先得到某个类型的Class对象</span>
		<span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
		<span class="token comment">//比喻clazz好比是镜子中的影子</span>
		
		<span class="token comment">//2、获取类信息</span>
		<span class="token comment">//（1）获取包对象，即所有java的包，都是Package的对象</span>
		<span class="token class-name">Package</span> pkg <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;包名：&quot;</span> <span class="token operator">+</span> pkg<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//（2）获取修饰符</span>
		<span class="token comment">//其实修饰符是Modifier，里面有很多常量值</span>
		<span class="token comment">/*
		 * 0x是十六进制
		 * PUBLIC           = 0x00000001;  1    1
		 * PRIVATE          = 0x00000002;  2	10
		 * PROTECTED        = 0x00000004;  4	100
		 * STATIC           = 0x00000008;  8	1000
		 * FINAL            = 0x00000010;  16	10000
		 * ...
		 * 
		 * 设计的理念，就是用二进制的某一位是1，来代表一种修饰符，整个二进制中只有一位是1，其余都是0
		 * 
		 * mod = 17          0x00000011
		 * if ((mod &amp; PUBLIC) != 0)  说明修饰符中有public
		 * if ((mod &amp; FINAL) != 0)   说明修饰符中有final
		 */</span>
		<span class="token keyword">int</span> mod <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>mod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//（3）类型名</span>
		<span class="token class-name">String</span> name <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//（4）父类，父类也有父类对应的Class对象</span>
		<span class="token class-name">Class</span> superclass <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>superclass<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//（5）父接口们</span>
		<span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span> class1 <span class="token operator">:</span> interfaces<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>class1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//（6）类的属性，  你声明的一个属性，它是Field的对象</span>
<span class="token comment">/*		Field clazz.getField(name)  根据属性名获取一个属性对象，但是只能得到公共的
		Field[] clazz.getFields();  获取所有公共的属性
		Field clazz.getDeclaredField(name)  根据属性名获取一个属性对象，可以获取已声明的
		Field[] clazz.getDeclaredFields()	获取所有已声明的属性
		*/</span>
		<span class="token class-name">Field</span> valueField <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		System.out.println(&quot;valueField = &quot; +valueField);</span>
		
		<span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredFields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//修饰符、数据类型、属性名    </span>
			<span class="token keyword">int</span> modifiers <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;属性的修饰符：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>modifiers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">String</span> name2 <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;属性名：&quot;</span> <span class="token operator">+</span> name2<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> type <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;属性的数据类型：&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//（7）构造器们</span>
		<span class="token class-name">Constructor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span> constructor <span class="token operator">:</span> constructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//修饰符、构造器名称、构造器形参列表  、抛出异常列表</span>
			<span class="token keyword">int</span> modifiers <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;构造器的修饰符：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>modifiers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">String</span> name2 <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;构造器名：&quot;</span> <span class="token operator">+</span> name2<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">//形参列表</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;形参列表：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterTypes <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span> parameterType <span class="token operator">:</span> parameterTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>parameterType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
            
            <span class="token comment">//异常列表</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;异常列表：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> exceptionTypes <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">getExceptionTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> exceptionType <span class="token operator">:</span> exceptionTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>exceptionType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=--------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//(8)方法们</span>
		<span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredMethods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> declaredMethods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//修饰符、返回值类型、方法名、形参列表 、异常列表 </span>
			<span class="token keyword">int</span> modifiers <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法的修饰符：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>modifiers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> returnType <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;返回值类型:&quot;</span> <span class="token operator">+</span> returnType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">String</span> name2 <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法名：&quot;</span> <span class="token operator">+</span> name2<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">//形参列表</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;形参列表：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterTypes <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span> parameterType <span class="token operator">:</span> parameterTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>parameterType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">//异常列表</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;异常列表：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> exceptionTypes <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getExceptionTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> exceptionType <span class="token operator">:</span> exceptionTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>exceptionType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-3-2-创建任意引用类型的对象"><a href="#_16-3-2-创建任意引用类型的对象" class="header-anchor">#</a> 16.3.2  创建任意引用类型的对象</h3> <p>两种方式：</p> <p>1、直接通过Class对象来实例化（要求必须有无参构造）</p> <p>2、通过获取构造器对象来进行实例化</p> <p>方式一的步骤：</p> <p>（1）获取该类型的Class对象（2）创建对象</p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.atguigu.test.Student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//Caused by: java.lang.NoSuchMethodException: com.atguigu.test.Student.&lt;init&gt;()</span>
		<span class="token comment">//即说明Student没有无参构造，就没有无参实例初始化方法&lt;init&gt;</span>
		<span class="token class-name">Object</span> stu <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">{</span>
<span class="token comment">//		AtGuigu obj = new AtGuigu();//编译期间无法创建</span>
		
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.atguigu.test.AtGuigu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//clazz代表com.atguigu.test.AtGuigu类型</span>
		<span class="token comment">//clazz.newInstance()创建的就是AtGuigu的对象</span>
		<span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>方式二的步骤：</p> <p>（1）获取该类型的Class对象（2）获取构造器对象（3）创建对象</p> <blockquote><p>如果构造器的权限修饰符修饰的范围不可见，也可以调用setAccessible(true)</p></blockquote> <p>示例代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestNewInstance</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
		<span class="token comment">//(1)获取Class对象</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.atguigu.test.Student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">/*
		 * 获取Student类型中的有参构造
		 * 如果构造器有多个，我们通常是根据形参【类型】列表来获取指定的一个构造器的
		 * 例如：public Student(int id, String name) 
		 */</span>
		<span class="token comment">//(2)获取构造器对象</span>
		<span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//(3)创建实例对象</span>
		<span class="token comment">// T newInstance(Object... initargs)  这个Object...是在创建对象时，给有参构造的实参列表</span>
		<span class="token class-name">Object</span> obj <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-3-3-操作任意类型的属性"><a href="#_16-3-3-操作任意类型的属性" class="header-anchor">#</a> 16.3.3 操作任意类型的属性</h3> <p>（1）获取该类型的Class对象
Class clazz = Class.forName(&quot;com.atguigu.bean.User&quot;);</p> <p>（2）获取属性对象
Field field = clazz.getDeclaredField(&quot;username&quot;);</p> <p>（3）设置属性可访问</p> <p>field.setAccessible(true);</p> <p>（4）创建实例对象：如果操作的是非静态属性，需要创建实例对象
Object obj = clazz.newInstance();</p> <p>（4）设置属性值</p> <p>field.set(obj,&quot;chai&quot;);
（5）获取属性值
Object value = field.get(obj);</p> <blockquote><p>如果操作静态变量，那么实例对象可以省略，用null表示</p></blockquote> <p>示例代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestField</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">//1、获取Student的Class对象</span>
		<span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.atguigu.test.Student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//2、获取属性对象，例如：id属性</span>
		<span class="token class-name">Field</span> idField <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//3、如果id是私有的等在当前类中不可访问access的，我们需要做如下操作</span>
		idField<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//4、创建实例对象，即，创建Student对象</span>
		<span class="token class-name">Object</span> stu <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
		<span class="token comment">//5、获取属性值</span>
		<span class="token comment">/*
		 * 以前：int 变量= 学生对象.getId()
		 * 现在：Object id属性对象.get(学生对象)
		 */</span>
		<span class="token class-name">Object</span> value <span class="token operator">=</span> idField<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id = &quot;</span><span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//6、设置属性值</span>
		<span class="token comment">/*
		 * 以前：学生对象.setId(值)
		 * 现在：id属性对象.set(学生对象,值)
		 */</span>
		idField<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>stu<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		value <span class="token operator">=</span> idField<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id = &quot;</span><span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-3-4-调用任意类型的方法"><a href="#_16-3-4-调用任意类型的方法" class="header-anchor">#</a> 16.3.4 调用任意类型的方法</h3> <p>（1）获取该类型的Class对象
Class clazz = Class.forName(&quot;com.atguigu.service.UserService&quot;);
（2）获取方法对象
Method method = clazz.getDeclaredMethod(&quot;login&quot;,String.class,String.class);
（3）创建实例对象
Object obj = clazz.newInstance();
（4）调用方法
Object result = method.invoke(obj,&quot;chai&quot;,&quot;123);</p> <blockquote><p>如果方法的权限修饰符修饰的范围不可见，也可以调用setAccessible(true)</p> <p>如果方法是静态方法，实例对象也可以省略，用null代替</p></blockquote> <p>示例代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMethod</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">// 1、获取Student的Class对象</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.atguigu.test.Student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//2、获取方法对象</span>
		<span class="token comment">/*
		 * 在一个类中，唯一定位到一个方法，需要：（1）方法名（2）形参列表，因为方法可能重载
		 * 
		 * 例如：void setName(String name)
		 */</span>
		<span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;setName&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//3、创建实例对象</span>
		<span class="token class-name">Object</span> stu <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//4、调用方法</span>
		<span class="token comment">/*
		 * 以前：学生对象.setName(值)
		 * 现在：方法对象.invoke(学生对象，值)
		 */</span>
		method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>stu<span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-3-5-获取泛型父类信息"><a href="#_16-3-5-获取泛型父类信息" class="header-anchor">#</a> 16.3.5 获取泛型父类信息</h3> <p>示例代码获取泛型父类信息：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Type：
 * （1）Class
 * （2）ParameterizedType   
 * 		例如：Father&lt;String,Integer&gt;
 * 			ArrayList&lt;String&gt;
 * （3）TypeVariable
 * 		例如：T，U,E,K,V
 * （4）WildcardType
 * 		例如：
 * 		ArrayList&lt;?&gt;
 * 		ArrayList&lt;? super 下限&gt;
 * 		ArrayList&lt;? extends 上限&gt;
 * （5）GenericArrayType
 * 		例如：T[]
 * 	
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestGeneric</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//需求：在运行时，获取Son类型的泛型父类的泛型实参&lt;String,Integer&gt;</span>
		
		<span class="token comment">//（1）还是先获取Class对象</span>
		<span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Son</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span><span class="token comment">//四种形式任意一种都可以</span>
		
		<span class="token comment">//（2）获取泛型父类</span>
<span class="token comment">//		Class sc = clazz.getSuperclass();</span>
<span class="token comment">//		System.out.println(sc);</span>
		<span class="token comment">/*
		 * getSuperclass()只能得到父类名，无法得到父类的泛型实参列表
		 */</span>
		<span class="token class-name">Type</span> type <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getGenericSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// Father&lt;String,Integer&gt;属于ParameterizedType</span>
		<span class="token class-name">ParameterizedType</span> pt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ParameterizedType</span><span class="token punctuation">)</span> type<span class="token punctuation">;</span>
		
		<span class="token comment">//（3）获取泛型父类的泛型实参列表</span>
		<span class="token class-name">Type</span><span class="token punctuation">[</span><span class="token punctuation">]</span> typeArray <span class="token operator">=</span> pt<span class="token punctuation">.</span><span class="token function">getActualTypeArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Type</span> type2 <span class="token operator">:</span> typeArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type2<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//泛型形参：&lt;T,U&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
	
<span class="token punctuation">}</span>
<span class="token comment">//泛型实参：&lt;String,Integer&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
	
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-3-6-读取注解信息"><a href="#_16-3-6-读取注解信息" class="header-anchor">#</a> 16.3.6 读取注解信息</h3> <p>示例代码读取注解信息：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestAnnotation</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//需求：可以获取MyClass类型上面配置的注解@MyAnnotation的value值</span>
		
		<span class="token comment">//读取注解</span>
<span class="token comment">//		（1）获取Class对象</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyClass</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
		
		<span class="token comment">//（2）获取注解对象</span>
		<span class="token comment">//获取指定注解对象</span>
		<span class="token class-name">MyAnnotation</span> my <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//（3）获取配置参数值</span>
		<span class="token class-name">String</span> value <span class="token operator">=</span> my<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//声明</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>  <span class="token comment">//说明这个注解可以保留到运行时</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span> <span class="token comment">//说明这个注解只能用在类型上面，包括类，接口，枚举等</span>
<span class="token annotation punctuation">@interface</span> <span class="token class-name">MyAnnotation</span><span class="token punctuation">{</span>
	<span class="token comment">//配置参数，如果只有一个配置参数，并且名称是value，在赋值时可以省略value=</span>
	<span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//使用注解</span>
<span class="token annotation punctuation">@MyAnnotation</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">{</span>
	
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-3-7-获取内部类或外部类信息"><a href="#_16-3-7-获取内部类或外部类信息" class="header-anchor">#</a> 16.3.7 获取内部类或外部类信息</h3> <p>public Class&lt;?&gt;[] getClasses()：返回所有公共内部类和内部接口。包括从超类继承的公共类和接口成员以及该类声明的公共类和接口成员。</p> <p>public Class&lt;?&gt;[] getDeclaredClasses()：返回 Class 对象的一个数组，这些对象反映声明为此 Class 对象所表示的类的成员的所有类和接口。包括该类所声明的公共、保护、默认（包）访问及私有类和接口，但不包括继承的类和接口。</p> <p>public Class&lt;?&gt; getDeclaringClass()：如果此 Class 对象所表示的类或接口是一个内部类或内部接口，则返回它的外部类或外部接口，否则返回null。</p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> inners <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> inner <span class="token operator">:</span> inners<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>inner<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> ec <span class="token operator">=</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> outer <span class="token operator">=</span> ec<span class="token punctuation">.</span><span class="token function">getDeclaringClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>outer<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><h3 id="_16-3-8-动态创建和操作任意类型的数组"><a href="#_16-3-8-动态创建和操作任意类型的数组" class="header-anchor">#</a> 16.3.8 动态创建和操作任意类型的数组</h3> <p>在java.lang.reflect包下还提供了一个Array类，Array对象可以代表所有的数组。程序可以通过使用Array类来动态的创建数组，操作数组元素等。</p> <p>Array类提供了如下几个方法：</p> <p>public static Object newInstance(Class&lt;?&gt; componentType, int... dimensions)：创建一个具有指定的组件类型和维度的新数组。</p> <p>public static void setXxx(Object array,int index,xxx value)：将array数组中[index]元素的值修改为value。此处的Xxx对应8种基本数据类型，如果该属性的类型是引用数据类型，则直接使用set(Object array,int index, Object value)方法。</p> <p>public static xxx getXxx(Object array,int index,xxx value)：将array数组中[index]元素的值返回。此处的Xxx对应8种基本数据类型，如果该属性的类型是引用数据类型，则直接使用get(Object array,int index)方法。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Array</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestArray</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Object</span> arr <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;尚硅谷&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;atguigu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_16-4注解-annotation"><a href="#_16-4注解-annotation" class="header-anchor">#</a> 16.4注解（Annotation）</h2> <h3 id="_16-4-1-注解概述"><a href="#_16-4-1-注解概述" class="header-anchor">#</a> 16.4.1 注解概述</h3> <p><strong>定义</strong>：注解（Annotation）是一种代码级别的注释。它是JDK1.5及以后版本引入的一个特性，与类、接口、枚举是在同一个层次。它可以声明在包、类、字段、方法、局部变量、方法参数等的前面，用来对这些元素进行说明，注释。</p> <blockquote><p>虽然说注解也是一种注释，因为它们都不会改变程序原有的逻辑，只是对程序增加了某些注释性信息。不过它又不同于单行注释和多行注释，对于单行注释和多行注释是给程序员看的，而注解是可以被编译器或其他程序读取的一种注释，程序还可以根据注解的不同，做出相应的处理。所以注解是插入到代码中以便有工具可以对它们进行处理的标签。</p></blockquote> <p><strong>应用场景</strong>：</p> <ul><li>编写文档：通过代码里标识的注解生成文档【例如，生成文档doc文档】</li> <li>代码分析：通过代码里标识的注解对代码进行分析，处理【例如，注解的反射】</li> <li>编译检查：通过代码里标识的注解让编译器能够实现基本的编译检查【例如，Override】</li></ul> <p><strong>常见注解</strong></p> <ol><li><strong>@author</strong>：用来标识作者名</li> <li><strong>@version</strong>：用于标识对象的版本号，适用范围：文件、类、方法。</li> <li><strong>@Override</strong> ：用来修饰方法声明，告诉编译器该方法是重写父类中的方法，如果父类不存在该方法，则编译失败。</li> <li><strong>@Deprecated</strong> ：表示过时的，即由此注解注释的代码已过时，不再推荐使用</li> <li><strong>@SupressWarning</strong>：抑制警告</li></ol> <h3 id="_16-4-2-自定义注解"><a href="#_16-4-2-自定义注解" class="header-anchor">#</a> 16.4.2 自定义注解</h3> <h5 id="_1、定义格式"><a href="#_1、定义格式" class="header-anchor">#</a> 1、定义格式</h5> <div class="language-java extra-class"><pre class="language-java"><code>元注解
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> 注解名称<span class="token punctuation">{</span>
	属性列表<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注解本质上就是一个接口，该接口默认继承Annotation接口。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyAnno</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>Annotation</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>任何一个注解，都默认的继承Annotation接口。</p> <h5 id="_2、注解的属性"><a href="#_2、注解的属性" class="header-anchor">#</a> 2、注解的属性</h5> <ul><li><p><strong>属性的作用</strong></p> <ul><li>可以让用户在使用注解时传递参数，让注解的功能更加强大。</li></ul></li> <li><p><strong>属性的格式</strong></p> <ul><li><strong>格式1：数据类型 属性名();</strong></li> <li><strong>格式2：数据类型 属性名() default 默认值;</strong></li></ul></li> <li><p><strong>属性定义示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyAnno</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">123</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span> 
<span class="token comment">// 该注解就有了三个个属性：value,name,num</span>
</code></pre></div></li> <li><p><strong>属性适用的数据类型</strong></p> <ul><li>八种基本数据类型（<strong>int,float,boolean,byte,double,char,long,short</strong>)。</li> <li>String类型，Class类型，枚举类型，注解类型。</li> <li>以上所有类型的一维数组。</li></ul></li></ul> <h3 id="_16-4-3-使用自定义注解"><a href="#_16-4-3-使用自定义注解" class="header-anchor">#</a> 16.4.3 使用自定义注解</h3> <h4 id="_1、使用格式"><a href="#_1、使用格式" class="header-anchor">#</a> 1、使用格式:</h4> <div class="language- extra-class"><pre><code>@注解名(属性名=属性值,属性名=属性值,属性名=属性值...)
</code></pre></div><p>示例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@MyAnno</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span>num<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2、使用注意事项"><a href="#_2、使用注意事项" class="header-anchor">#</a> 2、<strong>使用注意事项</strong></h4> <ul><li>如果属性有默认值，则使用注解的时候，这个属性可以不用赋值。</li> <li>如果属性没有默认值，那么在使用注解时一定要给属性赋值。</li> <li>特殊属性value
<ul><li><p><strong>当注解中只有一个属性且名称是value，在使用注解时给value属性赋值可以直接给属性值，即可以省略value属性名</strong></p></li> <li><p><strong>如果注解中除了value属性还有其他属性，且至少有一个属性没有默认值，则在使用注解给属性赋值时，value属性名不能省略。</strong></p></li></ul></li></ul> <h3 id="_16-4-4-元注解"><a href="#_16-4-4-元注解" class="header-anchor">#</a> 16.4.4 元注解</h3> <p>元注解是由Java定义的注解，主要用在其他注解上来限制（增强）其他注解的使用情况。</p> <p>默认情况下，注解可以用在任何地方，比如类，成员方法，构造方法，成员变量等地方。如果要限制注解的使用位置怎么办？那就可以使用元注解。</p> <ul><li><strong>@Target</strong></li> <li><strong>@Retention</strong></li></ul> <h4 id="_1、元注解之-target"><a href="#_1、元注解之-target" class="header-anchor">#</a> 1、元注解之@Target</h4> <ul><li><strong>作用：指明此注解用在哪个位置，如果不写默认是任何地方都可以使用。</strong> <ul><li>可选的参数值在枚举类<strong>ElemenetType</strong>中包括：</li></ul></li></ul> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name"> TYPE：</span> <span class="token value attr-value">用在类,接口上</span>
 FIELD：用在成员变量上
<span class="token key attr-name"> METHOD：</span> <span class="token value attr-value">用在方法上</span>
 PARAMETER：用在参数上
 CONSTRUCTOR：用在构造方法上
 LOCAL_VARIABLE：用在局部变量上
</code></pre></div><h4 id="_2、元注解之-retention"><a href="#_2、元注解之-retention" class="header-anchor">#</a> 2、元注解之@Retention</h4> <ul><li><strong>作用：定义该注解的生命周期(有效范围)。</strong> <ul><li>可选的参数值在枚举类型RetentionPolicy中包括</li></ul></li></ul> <div class="language-properties extra-class"><pre class="language-properties"><code>SOURCE：注解只存在于Java源代码中，编译生成的字节码文件中就不存在了。
CLASS：注解存在于Java源代码、编译以后的字节码文件中，运行的时候内存中没有，默认值。
RUNTIME：注解存在于Java源代码中、编译以后的字节码文件中、运行时内存中，程序可以通过反射获取该注解。
</code></pre></div><h3 id="_16-4-5-注解解析"><a href="#_16-4-5-注解解析" class="header-anchor">#</a> 16.4.5 注解解析</h3> <p>通过Java技术获取注解数据的过程则称为注解解析。通常通过反射获取注解及其属性值。</p> <h4 id="_1、与注解解析相关的接口"><a href="#_1、与注解解析相关的接口" class="header-anchor">#</a> 1、与注解解析相关的接口</h4> <ul><li><strong>Anontation</strong>：所有注解类型的公共接口，类似所有类的父类是Object。</li> <li><strong>AnnotatedElement</strong>：定义了与注解解析相关的方法，常用方法以下四个：</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">boolean</span> <span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Class</span> annotationClass<span class="token punctuation">)</span><span class="token punctuation">;</span> 判断当前对象是否有指定的注解，有则返回<span class="token boolean">true</span>，否则返回<span class="token boolean">false</span>。
<span class="token class-name">T</span> <span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> annotationClass<span class="token punctuation">)</span><span class="token punctuation">;</span>  获得当前对象上指定的注解对象。
<span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 获得当前对象及其从父类上继承的所有的注解对象。
<span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getDeclaredAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>获得当前对象上所有的注解对象，不包括父类的。
</code></pre></div><h4 id="_2、解析步骤"><a href="#_2、解析步骤" class="header-anchor">#</a> 2、解析步骤：</h4> <p>在程序中使用(解析)注解的步骤（获取注解中定义的属性值）：</p> <ol><li><p>获取注解定义的位置的对象  （Class，Method,Field）</p> <p>注解作用在那个成员上，就通过反射获得该成员的对象来得到它的注解。</p></li> <li><p>获取指定的注解 <code>getAnnotation(Class)</code></p> <p>如注解作用在方法上，就通过方法(Method)对象得到它的注解。</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token comment">// 得到方法对象</span>
 <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;方法名&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token comment">// 根据注解名得到方法上的注解对象</span>
 <span class="token class-name">MyAnno</span> myAnno <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyAnno</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p>如注解作用在类上，就通过Class对象得到它的注解。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 获得Class对象</span>
<span class="token class-name">Class</span> c <span class="token operator">=</span> 类名<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token comment">// 根据注解的Class获得使用在类上的注解对象</span>
 <span class="token class-name">MyAnno</span> myAnno <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyAnno</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>调用注解中的抽象方法获取配置的属性值</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//通过注解对象获取某个属性的值</span>
<span class="token class-name">String</span> value <span class="token operator">=</span> myAnno<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> myAnno<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <p><strong>案例练习：</strong></p> <p><strong>需求说明</strong></p> <ol><li>定义注解Book，要求如下：
<ul><li>包含属性：String value()   书名</li> <li>包含属性：double price()  价格，默认值为 100</li> <li>包含属性：String[] authors() 多位作者</li> <li>限制注解使用的位置：类和成员方法上</li> <li>指定注解的有效范围：RUNTIME</li></ul></li> <li>定义BookStore类，在类和成员方法上使用Book注解</li> <li>定义TestAnnotation测试类获取Book注解上的数据</li></ol> <p><strong>代码实现：</strong></p> <p><strong>注解Book</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
    <span class="token comment">// 书名</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 价格</span>
    <span class="token keyword">double</span> <span class="token function">price</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token comment">// 作者</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">authors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>BookStore类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Book</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;红楼梦&quot;</span><span class="token punctuation">,</span>authors <span class="token operator">=</span> <span class="token string">&quot;曹雪芹&quot;</span><span class="token punctuation">,</span>price <span class="token operator">=</span> <span class="token number">998</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookStore</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>TestAnnotation类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestAnnotation</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>  <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;---------获取类上注解的数据----------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取BookStore类上使用的Book注解数据
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 获得BookStore类对应的Class对象</span>
        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">BookStore</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">// 判断BookStore类是否使用了Book注解</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 根据注解Class对象获取注解对象</span>
            <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">)</span> c<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 输出book注解属性值</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;书名：&quot;</span> <span class="token operator">+</span> book<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;价格：&quot;</span> <span class="token operator">+</span> book<span class="token punctuation">.</span><span class="token function">price</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;作者：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">authors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/Java-Resource/JavaSE/尚硅谷-李金辉-JavaSE-第15章 网络编程.html" class="prev">
          网络编程
        </a></span> <span class="next"><a href="/Java-Resource/JavaSE/类的加载器.html">
          类的加载器
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:0;" data-v-b57cc07c data-v-7dd95ae2></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/Java-Resource/assets/js/app.3e355afd.js" defer></script><script src="/Java-Resource/assets/js/7.732492af.js" defer></script><script src="/Java-Resource/assets/js/1.35f7ce2e.js" defer></script><script src="/Java-Resource/assets/js/33.717186b7.js" defer></script>
  </body>
</html>
